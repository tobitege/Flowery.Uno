<?xml version="1.0" encoding="UTF-8" ?>
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="using:Flowery.Controls"
                    xmlns:kanban="using:Flowery.Uno.Kanban.Controls"
                    xmlns:kanbanConverters="using:Flowery.Uno.Kanban.Converters"
                    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
                    xmlns:services="using:Flowery.Services"
                    xmlns:utu="using:Uno.Toolkit.UI">
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="ms-appx:///Flowery.Uno/Themes/DaisyShared.xaml" />
        <ResourceDictionary Source="ms-appx:///Flowery.Uno/Themes/DaisyIcons.xaml" />
        <ResourceDictionary Source="ms-appx:///Flowery.Uno/Themes/DaisyResources.xaml" />
        <ResourceDictionary Source="ms-appx:///Flowery.Uno/Themes/DaisyButtons.xaml" />
    </ResourceDictionary.MergedDictionaries>
    <!-- Dependencies used by the Kanban block:
    - StaticResource: BooleanToVisibilityConverter (currently in DaisyControls.xaml)
    - StaticResource: DaisyIcon* (defined in DaisyIcons.xaml)
    - ThemeResource: Daisy* brushes / CaptionTextBlockStyle -->
    <!-- Kanban -->
    <kanbanConverters:KanbanTasksHostMarginConverter x:Key="KanbanTasksHostMarginConverter" />
    <kanbanConverters:KanbanTasksListViewPaddingConverter x:Key="KanbanTasksListViewPaddingConverter" />

    <Style x:Key="KanbanTasksListViewItemContainerStyle" TargetType="ListViewItem">
        <!-- Remove WinUI default left/right content insets (notably 16,0,12,0) so cards can be flush. -->
        <Setter Property="Padding" Value="0" />
        <Setter Property="HorizontalAlignment" Value="Stretch" />
        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        <Setter Property="IsTabStop" Value="False" />
    </Style>

    <Style x:Key="KanbanFocusButtonStyle"
           TargetType="controls:DaisyButton"
           BasedOn="{StaticResource DaisyButtonStyle}">
        <Setter Property="UseSystemFocusVisuals"
                Value="True" />
    </Style>
    <Style x:Key="KanbanFocusSelectStyle"
           TargetType="controls:DaisySelect">
        <Setter Property="UseSystemFocusVisuals"
                Value="True" />
    </Style>
    <Style x:Key="KanbanFocusInputStyle"
           TargetType="controls:DaisyInput">
        <Setter Property="BorderRingBrush"
                Value="{ThemeResource DaisyAccentBrush}" />
    </Style>
    <Style TargetType="kanban:FlowTaskCard">
        <Setter Property="Background"
                Value="{ThemeResource DaisyBase200Brush}" />
        <Setter Property="Foreground"
                Value="{ThemeResource DaisyBaseContentBrush}" />
        <Setter Property="BorderBrush"
                Value="{ThemeResource DaisyBase300Brush}" />
        <Setter Property="BorderThickness"
                Value="1" />
        <Setter Property="Padding"
                Value="12" />
        <Setter Property="Margin"
                Value="0" />
        <Setter Property="CornerRadius"
                Value="8" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="kanban:FlowTaskCard">
                    <Border x:Name="PART_Root"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            Padding="{TemplateBinding Padding}"
                            CornerRadius="{TemplateBinding CornerRadius}">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Unfocused" />
                                <VisualState x:Name="PointerFocused" />
                                <VisualState x:Name="Focused">
                                    <VisualState.Setters>
                                        <Setter Target="PART_Root.BorderBrush"
                                                Value="{ThemeResource DaisyAccentBrush}" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Border x:Name="PART_HeaderStrip"
                                    Grid.Row="0"
                                    Background="{ThemeResource DaisyInfoBrush}"
                                    CornerRadius="6"
                                    Padding="8,4">
                                <Grid ColumnSpacing="8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <StackPanel x:Name="PART_WorkItemStack"
                                                Orientation="Horizontal"
                                                Spacing="6"
                                                VerticalAlignment="Center"
                                                Visibility="{Binding HasWorkItemNumber, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                                        <TextBlock Text="{TemplateBinding WorkItemNumberText}"
                                                   Foreground="{ThemeResource DaisyInfoContentBrush}"
                                                   Style="{ThemeResource CaptionTextBlockStyle}" />
                                        <Border Width="1"
                                                Height="12"
                                                Background="{ThemeResource DaisyInfoContentBrush}"
                                                Opacity="0.4" />
                                    </StackPanel>
                                    <TextBlock x:Name="PART_TitleText"
                                               Grid.Column="1"
                                               Text="{TemplateBinding Title}"
                                               FontWeight="Bold"
                                               Foreground="{ThemeResource DaisyInfoContentBrush}"
                                               TextTrimming="CharacterEllipsis"
                                               TextWrapping="Wrap"
                                               MaxLines="2"
                                               VerticalAlignment="Center" />
                                </Grid>
                            </Border>
                            <controls:DaisyBadge x:Name="PART_ActionPill"
                                                 Grid.Row="0"
                                                 Variant="Accent"
                                                 Size="ExtraSmall"
                                                 Padding="6,0"
                                                 CornerRadius="6"
                                                 HorizontalAlignment="{TemplateBinding ActionPillHorizontalAlignment}"
                                                 VerticalAlignment="Top"
                                                 Opacity="{TemplateBinding ActionPillOpacity}"
                                                 IsHitTestVisible="{Binding IsActionPillVisible, RelativeSource={RelativeSource TemplatedParent}}"
                                                 controls:DaisyNeumorphic.IsEnabled="False"
                                                 Visibility="Visible">
                                <controls:DaisyBadge.RenderTransform>
                                    <TranslateTransform X="{Binding ActionPillOffsetX, RelativeSource={RelativeSource TemplatedParent}}"
                                                        Y="-6" />
                                </controls:DaisyBadge.RenderTransform>
                                <StackPanel Orientation="Horizontal"
                                            Spacing="2"
                                            VerticalAlignment="Center">
                                    <controls:DaisyIconText IconData="{StaticResource DaisyIconCheck}"
                                                            IconSize="10"
                                                            Foreground="{ThemeResource DaisyAccentContentBrush}"
                                                            IsTabStop="False"
                                                            Visibility="{Binding IsSelected, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                    <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                          x:Name="PART_CloseBtn"
                                                          Command="{TemplateBinding CloseCommand}"
                                                          CommandParameter="{TemplateBinding CloseCommandParameter}"
                                                          Variant="Ghost"
                                                          Shape="Square"
                                                          Size="ExtraSmall"
                                                          IsExternallyControlled="True"
                                                          Background="Transparent"
                                                          BorderBrush="Transparent"
                                                          Foreground="{ThemeResource DaisyAccentContentBrush}"
                                                          Opacity="0"
                                                          IsHitTestVisible="False"
                                                          controls:DaisyNeumorphic.IsEnabled="False"
                                                          Padding="0"
                                                          MinWidth="0"
                                                          MinHeight="0"
                                                          Width="16"
                                                          Height="16"
                                                          UseSystemFocusVisuals="True">
                                        <controls:DaisyIconText IconData="{StaticResource DaisyIconClose}"
                                                                IconSize="10"
                                                                Foreground="{ThemeResource DaisyAccentContentBrush}"
                                                                Margin="0,-1,0,1"
                                                                IsTabStop="False" />
                                    </controls:DaisyButton>
                                </StackPanel>
                            </controls:DaisyBadge>
                            <Grid Grid.Row="1"
                                  Margin="0,4,0,0"
                                  ColumnSpacing="8"
                                  Visibility="{Binding IsBlocked, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Border Background="{ThemeResource DaisyWarningBrush}"
                                        CornerRadius="10"
                                        Padding="4,2"
                                        VerticalAlignment="Center">
                                    <TextBlock Text="{TemplateBinding BlockedBadgeText}"
                                               Foreground="{ThemeResource DaisyWarningContentBrush}"
                                               Style="{ThemeResource CaptionTextBlockStyle}" />
                                </Border>
                                <TextBlock Grid.Column="1"
                                           Text="{TemplateBinding BlockedDetailText}"
                                           Style="{ThemeResource CaptionTextBlockStyle}"
                                           Foreground="{TemplateBinding Foreground}"
                                           TextWrapping="Wrap" />
                            </Grid>
                            <ContentPresenter Grid.Row="2"
                                              Content="{TemplateBinding Content}"
                                              Margin="0,4,0,0" />
                            <controls:WrapPanel Grid.Row="3"
                                                Orientation="Horizontal"
                                                Spacing="12"
                                                Margin="0,6,0,0">
                                <controls:DaisyBadge Variant="Ghost"
                                                     Size="Small"
                                                     Padding="4,0"
                                                     Opacity="0.85"
                                                     HorizontalContentAlignment="Left"
                                                     HorizontalAlignment="Left"
                                                     Visibility="{Binding HasPriority, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    <controls:DaisyBadge.RenderTransform>
                                        <TranslateTransform X="-4" />
                                    </controls:DaisyBadge.RenderTransform>
                                    <controls:DaisyIconText Text="{TemplateBinding PriorityText}"
                                                            Variant="Ghost"
                                                            IsTabStop="False" />
                                </controls:DaisyBadge>
                                <controls:DaisyBadge Variant="Ghost"
                                                     Size="Small"
                                                     Padding="4,0"
                                                     Opacity="0.85"
                                                     HorizontalContentAlignment="Left"
                                                     HorizontalAlignment="Left"
                                                     Visibility="{Binding HasSubtaskSummary, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    <controls:DaisyBadge.RenderTransform>
                                        <TranslateTransform X="-4" />
                                    </controls:DaisyBadge.RenderTransform>
                                    <controls:DaisyIconText IconData="{StaticResource DaisyIconDataDisplay}"
                                                            IconSize="12"
                                                            Text="{TemplateBinding SubtaskSummaryText}"
                                                            Variant="Ghost"
                                                            IsTabStop="False" />
                                </controls:DaisyBadge>
                            </controls:WrapPanel>
                            <Grid Grid.Row="4"
                                  Margin="0,8,0,0"
                                  ColumnSpacing="10"
                                  RowSpacing="2"
                                  Visibility="{Binding HasFooter, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <controls:DaisyAvatar Grid.Row="0"
                                                      Grid.RowSpan="2"
                                                      Grid.Column="0"
                                                      Size="ExtraSmall"
                                                      IsPlaceholder="True"
                                                      Initials="{TemplateBinding AssigneeInitials}"
                                                      VerticalAlignment="Center"
                                                      Visibility="{Binding HasAssignee, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                <StackPanel Grid.Row="0"
                                            Grid.Column="1"
                                            Orientation="Horizontal"
                                            Spacing="8"
                                            VerticalAlignment="Center">
                                    <controls:DaisyIconText IconData="{StaticResource DaisyIconDateDisplay}"
                                                            IconSize="12"
                                                            Text="{TemplateBinding StartDateText}"
                                                            Foreground="{TemplateBinding Foreground}"
                                                            Variant="Ghost"
                                                            IsTabStop="False"
                                                            Visibility="{Binding HasStartDate, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                                        <ToolTipService.ToolTip>
                                            <ToolTip Content="{Binding ProgressText, RelativeSource={RelativeSource TemplatedParent}}" />
                                        </ToolTipService.ToolTip>
                                    </controls:DaisyIconText>
                                    <Border Width="1"
                                            Height="12"
                                            Background="{TemplateBinding Foreground}"
                                            Opacity="0.35"
                                            Visibility="{Binding HasDateRange, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                    <controls:DaisyIconText IconData="{StaticResource DaisyIconDateDisplay}"
                                                            IconSize="12"
                                                            Text="{TemplateBinding EndDateText}"
                                                            Foreground="{TemplateBinding Foreground}"
                                                            Variant="Ghost"
                                                            IsTabStop="False"
                                                            Visibility="{Binding HasEndDate, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                                        <ToolTipService.ToolTip>
                                            <ToolTip Content="{Binding ProgressText, RelativeSource={RelativeSource TemplatedParent}}" />
                                        </ToolTipService.ToolTip>
                                    </controls:DaisyIconText>
                                </StackPanel>
                                <Grid Grid.Row="1"
                                      Grid.Column="1"
                                      ColumnSpacing="8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="{TemplateBinding AssigneeText}"
                                               Foreground="{TemplateBinding Foreground}"
                                               Style="{ThemeResource CaptionTextBlockStyle}"
                                               Visibility="{Binding HasAssignee, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                    <controls:DaisyBadge Grid.Column="1"
                                                         Variant="Neutral"
                                                         Size="Small"
                                                         Padding="6,0"
                                                         Background="{ThemeResource DaisyNeutralBrush}"
                                                         Foreground="{ThemeResource DaisyNeutralContentBrush}"
                                                         HorizontalAlignment="Right"
                                                         VerticalAlignment="Center"
                                                         Visibility="{Binding HasProgress, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                                        <TextBlock Text="{TemplateBinding ProgressText}"
                                                   Foreground="{ThemeResource DaisyNeutralContentBrush}"
                                                   Style="{ThemeResource CaptionTextBlockStyle}" />
                                    </controls:DaisyBadge>
                                </Grid>
                            </Grid>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="kanban:FlowKanbanAddCard">
        <Setter Property="HorizontalAlignment"
                Value="Stretch" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="kanban:FlowKanbanAddCard">
                    <Grid>
                        <!-- Add Button (visible when not editing) -->
                        <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                              x:Name="PART_AddButton"
                                              Variant="Ghost"
                                              HorizontalAlignment="Stretch">
                            <controls:DaisyIconText IconData="{StaticResource DaisyIconPlus}"
                                                    IconSize="12"
                                                    Text="{TemplateBinding AddCardText}" />
                        </controls:DaisyButton>
                        <!-- Input Panel (visible when editing) -->
                        <Grid x:Name="PART_InputPanel"
                              Visibility="Collapsed">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <controls:DaisyInput Style="{StaticResource KanbanFocusInputStyle}"
                                                 x:Name="PART_TitleInput"
                                                 PlaceholderText="{TemplateBinding AddCardPlaceholderText}"
                                                 Variant="Bordered"
                                                 Size="Small"
                                                 AcceptsReturn="True"
                                                 TextWrapping="Wrap" />
                            <StackPanel Grid.Row="1"
                                        Orientation="Horizontal"
                                        Spacing="8"
                                        Margin="0,8,0,0">
                                <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                      x:Name="PART_ConfirmButton"
                                                      Content="{TemplateBinding AddCardConfirmText}"
                                                      Variant="Primary"
                                                      Size="Small" />
                                <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                      x:Name="PART_CancelButton"
                                                      Content="{TemplateBinding AddCardCancelText}"
                                                      Variant="Ghost"
                                                      Size="Small" />
                            </StackPanel>
                        </Grid>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="kanban:FlowKanbanColumn">
        <Setter Property="Background"
                Value="{ThemeResource DaisyBase200Brush}" />
        <Setter Property="BorderBrush"
                Value="{ThemeResource DaisyBase300Brush}" />
        <Setter Property="BorderThickness"
                Value="1" />
        <Setter Property="Padding"
                Value="12" />
        <Setter Property="CornerRadius"
                Value="12" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="kanban:FlowKanbanColumn">
                    <Border x:Name="PART_ColumnBorder"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="{TemplateBinding CornerRadius}"
                            Padding="{TemplateBinding Padding}">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="FocusStates">
                                <VisualState x:Name="Unfocused" />
                                <VisualState x:Name="PointerFocused" />
                                <VisualState x:Name="Focused">
                                    <VisualState.Setters>
                                        <Setter Target="PART_ColumnBorder.BorderBrush"
                                                Value="{ThemeResource DaisyAccentBrush}" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <ContentPresenter Content="{TemplateBinding Content}"
                                          HorizontalAlignment="Stretch"
                                          VerticalAlignment="Stretch" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="kanban:FlowKanbanHome">
        <Setter Property="Background"
                Value="{ThemeResource DaisyBase100Brush}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="kanban:FlowKanbanHome">
                    <Grid x:Name="PART_HomeRoot"
                          Background="{TemplateBinding Background}"
                          DataContext="{Binding Localization, RelativeSource={RelativeSource TemplatedParent}}"
                          Tag="{Binding RelativeSource={RelativeSource TemplatedParent}}">
                        <ScrollViewer HorizontalScrollBarVisibility="Disabled"
                                      VerticalScrollBarVisibility="Auto">
                            <Border Padding="16">
                                <StackPanel Orientation="Vertical"
                                            Spacing="20">
                                    <StackPanel Orientation="Vertical"
                                                Spacing="4"
                                                Visibility="{Binding IsWelcomeMessageVisible, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                                        <TextBlock x:Uid="KanbanHome.Header.Title"
                                                   Style="{ThemeResource TitleTextBlockStyle}"
                                                   Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                   Text="{Binding WelcomeTitleDisplay, RelativeSource={RelativeSource TemplatedParent}}"
                                                   TextWrapping="Wrap" />
                                        <TextBlock x:Uid="KanbanHome.Header.Subtitle"
                                                   Style="{ThemeResource BodyTextBlockStyle}"
                                                   Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                   Text="{Binding WelcomeSubtitleDisplay, RelativeSource={RelativeSource TemplatedParent}}"
                                                   TextWrapping="Wrap" />
                                    </StackPanel>
                                    <controls:WrapPanel Orientation="Horizontal"
                                                        HorizontalSpacing="12"
                                                        VerticalSpacing="12"
                                                        Visibility="{Binding HasAnyBoards, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                                        <controls:DaisySelect Style="{StaticResource KanbanFocusSelectStyle}"
                                                              x:Name="PART_SortSelect"
                                                              x:Uid="KanbanHome.Toolbar.Sort"
                                                              Width="200"
                                                              Variant="Bordered"
                                                              Size="Small"
                                                              LocalizationSource="{Binding Localization, RelativeSource={RelativeSource TemplatedParent}}"
                                                              SelectedIndex="{Binding SortModeIndex, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                                                              AutomationProperties.Name="{Binding [Kanban_Home_SortBy]}">
                                            <ToolTipService.ToolTip>
                                                <ToolTip Content="{Binding [Kanban_Home_SortBy]}" />
                                            </ToolTipService.ToolTip>
                                            <controls:DaisySelectItem LocalizationKey="Kanban_Home_Sort_Recent" />
                                            <controls:DaisySelectItem LocalizationKey="Kanban_Home_Sort_RecentAsc" />
                                            <controls:DaisySelectItem LocalizationKey="Kanban_Home_Sort_NameAsc" />
                                            <controls:DaisySelectItem LocalizationKey="Kanban_Home_Sort_NameDesc" />
                                        </controls:DaisySelect>
                                        <controls:DaisyInput Style="{StaticResource KanbanFocusInputStyle}"
                                                             x:Name="PART_SearchInput"
                                                             x:Uid="KanbanHome.Toolbar.Search"
                                                             Variant="Bordered"
                                                             Size="Small"
                                                             StartIconData="{StaticResource DaisyIconSearch}"
                                                             MinWidth="200"
                                                             Width="260"
                                                             PlaceholderText="{Binding [Kanban_Home_SearchPlaceholder]}"
                                                             AutomationProperties.Name="{Binding [Kanban_Home_SearchPlaceholder]}"
                                                             Text="{Binding SearchText, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                        <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                              Command="{Binding CreateBoardCommand, RelativeSource={RelativeSource TemplatedParent}}"
                                                              AutomationProperties.Name="{Binding [Kanban_Home_CreateBoard]}"
                                                              Variant="Default"
                                                              Size="Small">
                                            <controls:DaisyIconText IconData="{StaticResource DaisyIconPlus}"
                                                                    IconSize="14"
                                                                    Text="{Binding [Kanban_Home_CreateBoard]}" />
                                        </controls:DaisyButton>
                                    </controls:WrapPanel>
                                    <Border x:Uid="KanbanHome.Empty.State"
                                            Background="{ThemeResource DaisyBase200Brush}"
                                            BorderBrush="{ThemeResource DaisyBase300Brush}"
                                            BorderThickness="1"
                                            CornerRadius="16"
                                            Padding="20"
                                            Visibility="{Binding IsEmptyStateVisible, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                                        <StackPanel Orientation="Vertical"
                                                    Spacing="12">
                                            <Border Width="40"
                                                    Height="40"
                                                    CornerRadius="999"
                                                    Background="{ThemeResource DaisyBase100Brush}"
                                                    HorizontalAlignment="Left">
                                                <controls:DaisyIconText IconData="{StaticResource DaisyIconHome}"
                                                                        IconSize="20" />
                                            </Border>
                                            <TextBlock x:Uid="KanbanHome.Empty.Title"
                                                       Style="{ThemeResource SubtitleTextBlockStyle}"
                                                       Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                       Text="{Binding [Kanban_Home_EmptyTitle]}"
                                                       TextWrapping="Wrap" />
                                            <TextBlock x:Uid="KanbanHome.Empty.Message"
                                                       Style="{ThemeResource BodyTextBlockStyle}"
                                                       Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                       Text="{Binding [Kanban_Home_EmptyMessage]}"
                                                       TextWrapping="Wrap" />
                                            <StackPanel Orientation="Horizontal"
                                                        Spacing="12">
                                                <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                      x:Uid="KanbanHome.Empty.CreateBoard"
                                                                      Command="{Binding CreateBoardCommand, RelativeSource={RelativeSource TemplatedParent}}"
                                                                      Content="{Binding [Kanban_Home_CreateBoard]}"
                                                                      Variant="Primary"
                                                                      Size="Small"
                                                                      AutomationProperties.Name="{Binding [Kanban_Home_CreateBoard]}" />
                                                <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                      x:Uid="KanbanHome.Empty.CreateDemo"
                                                                      Command="{Binding CreateDemoBoardCommand, RelativeSource={RelativeSource TemplatedParent}}"
                                                                      Content="{Binding [Kanban_Home_CreateDemo]}"
                                                                      Variant="Neutral"
                                                                      Size="Small"
                                                                      AutomationProperties.Name="{Binding [Kanban_Home_CreateDemo]}" />
                                            </StackPanel>
                                        </StackPanel>
                                    </Border>
                                    <muxc:ItemsRepeater x:Name="PART_BoardGrid"
                                                        Visibility="{Binding HasBoards, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                        ItemsSource="{Binding FilteredBoards, RelativeSource={RelativeSource TemplatedParent}}">
                                        <muxc:ItemsRepeater.Layout>
                                            <muxc:UniformGridLayout MinItemWidth="220"
                                                                    MinItemHeight="180"
                                                                    MinRowSpacing="16"
                                                                    MinColumnSpacing="16"
                                                                    ItemsJustification="Start" />
                                        </muxc:ItemsRepeater.Layout>
                                        <muxc:ItemsRepeater.ItemTemplate>
                                            <DataTemplate>
                                                <controls:DaisyCard Variant="Compact"
                                                                    BodyPadding="0"
                                                                    BorderBrush="{ThemeResource DaisyBase300Brush}"
                                                                    BorderThickness="1"
                                                                    HorizontalAlignment="Stretch"
                                                                    VerticalAlignment="Stretch">
                                                    <Border x:Name="PART_BoardOpenSurface"
                                                            Background="Transparent"
                                                            HorizontalAlignment="Stretch"
                                                            VerticalAlignment="Stretch"
                                                            Padding="16"
                                                            MinHeight="180"
                                                            AutomationProperties.Name="{Binding Title}">
                                                        <Grid ColumnSpacing="8"
                                                              RowSpacing="12">
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="Auto" />
                                                            </Grid.RowDefinitions>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="*" />
                                                                <ColumnDefinition Width="Auto" />
                                                            </Grid.ColumnDefinitions>
                                                            <Border Grid.Row="0"
                                                                    Grid.Column="0"
                                                                    Grid.ColumnSpan="2"
                                                                    Height="72"
                                                                    CornerRadius="12"
                                                                    Background="{ThemeResource DaisyBase200Brush}"
                                                                    HorizontalAlignment="Stretch">
                                                                <controls:DaisyIconText IconData="{StaticResource DaisyIconLayout}"
                                                                                        IconSize="20"
                                                                                        HorizontalAlignment="Center"
                                                                                        VerticalAlignment="Center" />
                                                            </Border>
                                                            <TextBlock Grid.Row="1"
                                                                       Grid.Column="0"
                                                                       Text="{Binding Title}"
                                                                       Style="{ThemeResource BodyTextBlockStyle}"
                                                                       VerticalAlignment="Center"
                                                                       TextWrapping="Wrap" />
                                                            <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                                  x:Uid="KanbanHome.Card.Menu"
                                                                                  x:Name="PART_BoardMenuButton"
                                                                                  Grid.Row="1"
                                                                                  Grid.Column="1"
                                                                                  Variant="Ghost"
                                                                                  Shape="Square"
                                                                                  Size="ExtraSmall"
                                                                                  VerticalAlignment="Center"
                                                                                  AutomationProperties.Name="{Binding DataContext[Kanban_Home_BoardMenu], ElementName=PART_HomeRoot}"
                                                                                  >
                                                                <ToolTipService.ToolTip>
                                                                    <ToolTip Content="{Binding DataContext[Kanban_Home_BoardMenu], ElementName=PART_HomeRoot}" />
                                                                </ToolTipService.ToolTip>
                                                                <controls:DaisyIconText IconData="{StaticResource DaisyIconHamburger}"
                                                                                        IconSize="12" />
                                                                <controls:DaisyButton.Flyout>
                                                                    <MenuFlyout>
                                                                        <controls:DaisyMenuFlyoutItem LocalizationKey="Kanban_Home_Open" />
                                                                        <controls:DaisyMenuFlyoutItem LocalizationKey="Kanban_Home_Rename" />
                                                                        <controls:DaisyMenuFlyoutItem LocalizationKey="Kanban_Home_Duplicate" />
                                                                        <controls:DaisyMenuFlyoutItem LocalizationKey="Kanban_Home_Export" />
                                                                        <controls:DaisyMenuFlyoutItem LocalizationKey="Kanban_Home_Delete" />
                                                                    </MenuFlyout>
                                                                </controls:DaisyButton.Flyout>
                                                            </controls:DaisyButton>
                                                            <TextBlock Grid.Row="2"
                                                                       Grid.Column="0"
                                                                       Grid.ColumnSpan="2"
                                                                       Text="{Binding LastModifiedDisplay}"
                                                                       Style="{ThemeResource CaptionTextBlockStyle}"
                                                                       TextWrapping="Wrap" />
                                                        </Grid>
                                                    </Border>
                                                </controls:DaisyCard>
                                            </DataTemplate>
                                        </muxc:ItemsRepeater.ItemTemplate>
                                    </muxc:ItemsRepeater>
                                </StackPanel>
                            </Border>
                        </ScrollViewer>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="kanban:FlowKanbanUserManagement">
        <Setter Property="Background"
                Value="{ThemeResource DaisyBase100Brush}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="kanban:FlowKanbanUserManagement">
                    <Grid x:Name="PART_UsersRoot"
                          Background="{TemplateBinding Background}"
                          DataContext="{Binding Localization, RelativeSource={RelativeSource TemplatedParent}}"
                          Tag="{Binding RelativeSource={RelativeSource TemplatedParent}}"
                          services:FloweryResponsive.IsEnabled="True">
                        <ScrollViewer HorizontalScrollBarVisibility="Disabled"
                                      VerticalScrollBarVisibility="Auto">
                            <Border Padding="16">
                                <Grid RowSpacing="16">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <StackPanel Grid.Row="0"
                                                Orientation="Vertical"
                                                Spacing="6">
                                        <controls:WrapPanel Orientation="Horizontal"
                                                            HorizontalSpacing="14"
                                                            VerticalSpacing="0"
                                                            HorizontalAlignment="Left">
                                            <Border VerticalAlignment="Top">
                                                <TextBlock x:Uid="KanbanUsers.Header.Title"
                                                           Style="{ThemeResource TitleTextBlockStyle}"
                                                           Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                           Text="{Binding [Kanban_Users_Title]}"
                                                           TextAlignment="Left"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Top" />
                                            </Border>
                                            <Border VerticalAlignment="Top"
                                                    MaxWidth="{Binding (services:FloweryResponsive.ResponsiveMaxWidth), ElementName=PART_UsersRoot}">
                                                <TextBlock x:Uid="KanbanUsers.Header.Subtitle"
                                                           Style="{ThemeResource BodyTextBlockStyle}"
                                                           Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                           Text="{Binding [Kanban_Users_Subtitle]}"
                                                           TextAlignment="Left"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Top" />
                                            </Border>
                                            <Border VerticalAlignment="Top"
                                                    MaxWidth="{Binding (services:FloweryResponsive.ResponsiveMaxWidth), ElementName=PART_UsersRoot}">
                                                <TextBlock x:Uid="KanbanUsers.Header.Subtitle2"
                                                           Style="{ThemeResource BodyTextBlockStyle}"
                                                           Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                           Text="NOTE: This control is single-user only! There is no multi-user backend as of yet!"
                                                           TextAlignment="Left"
                                                           TextWrapping="Wrap"
                                                           VerticalAlignment="Top" />
                                            </Border>
                                        </controls:WrapPanel>
                                        <StackPanel Orientation="Vertical"
                                                    Spacing="12">
                                            <Grid ColumnSpacing="12">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>
                                                <TextBlock x:Uid="KanbanUsers.Providers.Title"
                                                           Style="{ThemeResource SubtitleTextBlockStyle}"
                                                           Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                           Text="{Binding [Kanban_Users_Providers_Title]}" />
                                                <TextBlock Grid.Column="1"
                                                           Style="{ThemeResource CaptionTextBlockStyle}"
                                                           Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                           HorizontalAlignment="Right">
                                                    <Run Text="{Binding Tag.ProviderCount, ElementName=PART_UsersRoot}" />
                                                    <Run Text=" " />
                                                    <Run Text="{Binding [Kanban_Users_Providers_Count]}" />
                                                </TextBlock>
                                            </Grid>
                                            <muxc:ItemsRepeater ItemsSource="{Binding Tag.Providers, ElementName=PART_UsersRoot}">
                                                <muxc:ItemsRepeater.Layout>
                                                    <muxc:UniformGridLayout MinItemWidth="240"
                                                                            MinItemHeight="140"
                                                                            MinRowSpacing="12"
                                                                            MinColumnSpacing="12"
                                                                            ItemsJustification="Start" />
                                                </muxc:ItemsRepeater.Layout>
                                                <muxc:ItemsRepeater.ItemTemplate>
                                                    <DataTemplate>
                                                        <controls:DaisyCard x:Name="ProviderCard"
                                                                            Variant="Compact"
                                                                            ColorVariant="Base200"
                                                                            BodyPadding="12"
                                                                            BorderBrush="{ThemeResource DaisyBase300Brush}"
                                                                            BorderThickness="1"
                                                                            CornerRadius="12">
                                                            <StackPanel Orientation="Vertical"
                                                                        Spacing="8">
                                                                <TextBlock Style="{ThemeResource SubtitleTextBlockStyle}"
                                                                           Foreground="{Binding ElementName=ProviderCard, Path=Foreground}"
                                                                           Text="{Binding DisplayName}"
                                                                           TextWrapping="Wrap" />
                                                                <TextBlock Style="{ThemeResource CaptionTextBlockStyle}"
                                                                           Foreground="{Binding ElementName=ProviderCard, Path=Foreground}"
                                                                           TextWrapping="Wrap">
                                                                    <Run Text="{Binding DataContext[Kanban_Users_Provider_Key], ElementName=PART_UsersRoot}" />
                                                                    <Run Text=": " />
                                                                    <Run Text="{Binding ProviderKey}" />
                                                                </TextBlock>
                                                                <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                                      Variant="Primary"
                                                                                      Size="Small"
                                                                                      HorizontalAlignment="Left"
                                                                                      Visibility="{Binding ShouldShowConnect}"
                                                                                      Command="{Binding Tag.ConnectGitHubCommand, ElementName=PART_UsersRoot}"
                                                                                      CommandParameter="{Binding ProviderKey}"
                                                                                      Content="{Binding DataContext[Common_Connect], ElementName=PART_UsersRoot}"
                                                                                      AutomationProperties.Name="{Binding DataContext[Common_Connect], ElementName=PART_UsersRoot}" />
                                                                <StackPanel Orientation="Horizontal"
                                                                            Spacing="8"
                                                                            HorizontalAlignment="Left"
                                                                            Visibility="{Binding ShouldShowReconnect}">
                                                                    <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                                          Variant="Neutral"
                                                                                          Size="Small"
                                                                                          Command="{Binding Tag.ConnectGitHubCommand, ElementName=PART_UsersRoot}"
                                                                                          CommandParameter="{Binding ProviderKey}"
                                                                                          Content="{Binding DataContext[Kanban_Users_Reconnect_Button], ElementName=PART_UsersRoot}"
                                                                                          AutomationProperties.Name="{Binding DataContext[Kanban_Users_Reconnect_Button], ElementName=PART_UsersRoot}" />
                                                                    <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                                          Variant="Ghost"
                                                                                          Size="Small"
                                                                                          Visibility="{Binding ShouldShowDisconnect}"
                                                                                          Command="{Binding Tag.DisconnectProviderCommand, ElementName=PART_UsersRoot}"
                                                                                          CommandParameter="{Binding ProviderKey}"
                                                                                          Content="{Binding DataContext[Common_Disconnect], ElementName=PART_UsersRoot}"
                                                                                          AutomationProperties.Name="{Binding DataContext[Common_Disconnect], ElementName=PART_UsersRoot}" />
                                                                </StackPanel>
                                                            </StackPanel>
                                                        </controls:DaisyCard>
                                                    </DataTemplate>
                                                </muxc:ItemsRepeater.ItemTemplate>
                                            </muxc:ItemsRepeater>
                                        </StackPanel>
                                        <StackPanel Orientation="Vertical"
                                                    Spacing="12">
                                            <Grid ColumnSpacing="12">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>
                                                <TextBlock x:Uid="KanbanUsers.Users.Title"
                                                           Style="{ThemeResource SubtitleTextBlockStyle}"
                                                           Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                           Text="{Binding [Kanban_Users_Users_Title]}" />
                                                <TextBlock Grid.Column="1"
                                                           Style="{ThemeResource CaptionTextBlockStyle}"
                                                           Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                           HorizontalAlignment="Right">
                                                    <Run Text="{Binding Tag.UserCount, ElementName=PART_UsersRoot}" />
                                                    <Run Text=" " />
                                                    <Run Text="{Binding [Kanban_Users_Users_Count]}" />
                                                </TextBlock>
                                            </Grid>
                                            <Grid ColumnSpacing="8">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>
                                                <controls:DaisyInput Style="{StaticResource KanbanFocusInputStyle}"
                                                                     x:Uid="KanbanUsers.Search"
                                                                     Grid.Column="0"
                                                                     Variant="Bordered"
                                                                     Size="Small"
                                                                     StartIconData="{StaticResource DaisyIconSearch}"
                                                                     PlaceholderText="{Binding [Kanban_Users_SearchPlaceholder]}"
                                                                     AutomationProperties.Name="{Binding [Kanban_Users_SearchPlaceholder]}"
                                                                     Text="{Binding Tag.SearchText, ElementName=PART_UsersRoot, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                      Grid.Column="1"
                                                                      Command="{Binding Tag.RefreshCommand, ElementName=PART_UsersRoot}"
                                                                      AutomationProperties.Name="{Binding [Kanban_Users_Refresh]}"
                                                                      Variant="Neutral"
                                                                      Shape="Square"
                                                                      Size="Small">
                                                    <ToolTipService.ToolTip>
                                                        <ToolTip Content="{Binding [Kanban_Users_Refresh]}" />
                                                    </ToolTipService.ToolTip>
                                                    <controls:DaisyIconText IconData="{StaticResource DaisyIconRefresh}"
                                                                            IconSize="14" />
                                                </controls:DaisyButton>
                                            </Grid>
                                            <Border Background="{ThemeResource DaisyBase200Brush}"
                                                    BorderBrush="{ThemeResource DaisyBase300Brush}"
                                                    BorderThickness="1"
                                                    CornerRadius="12"
                                                    Padding="12"
                                                    Visibility="{Binding Tag.IsLocalProvider, ElementName=PART_UsersRoot, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                <StackPanel Orientation="Vertical"
                                                            Spacing="12">
                                                    <TextBlock x:Uid="KanbanUsers.AddLocal.Title"
                                                               Style="{ThemeResource SubtitleTextBlockStyle}"
                                                               Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                               Text="{Binding [Kanban_Users_AddLocal_Title]}" />
                                                    <Grid ColumnSpacing="8">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*" />
                                                            <ColumnDefinition Width="*" />
                                                            <ColumnDefinition Width="Auto" />
                                                        </Grid.ColumnDefinitions>
                                                        <controls:DaisyInput Style="{StaticResource KanbanFocusInputStyle}"
                                                                             x:Uid="KanbanUsers.AddLocal.Name"
                                                                             Grid.Column="0"
                                                                             Variant="Bordered"
                                                                             Size="Small"
                                                                             PlaceholderText="{Binding [Kanban_Users_AddLocal_Name]}"
                                                                             AutomationProperties.Name="{Binding [Kanban_Users_AddLocal_Name]}"
                                                                             Text="{Binding Tag.NewUserName, ElementName=PART_UsersRoot, Mode=TwoWay}" />
                                                        <controls:DaisyInput Style="{StaticResource KanbanFocusInputStyle}"
                                                                             x:Uid="KanbanUsers.AddLocal.Email"
                                                                             Grid.Column="1"
                                                                             Variant="Bordered"
                                                                             Size="Small"
                                                                             PlaceholderText="{Binding [Kanban_Users_AddLocal_Email]}"
                                                                             AutomationProperties.Name="{Binding [Kanban_Users_AddLocal_Email]}"
                                                                             Text="{Binding Tag.NewUserEmail, ElementName=PART_UsersRoot, Mode=TwoWay}" />
                                                        <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                              x:Uid="KanbanUsers.AddLocal.Button"
                                                                              Grid.Column="2"
                                                                              Command="{Binding Tag.AddUserCommand, ElementName=PART_UsersRoot}"
                                                                              Content="{Binding [Kanban_Users_AddLocal_Button]}"
                                                                              Variant="Primary"
                                                                              Size="Small"
                                                                              AutomationProperties.Name="{Binding [Kanban_Users_AddLocal_Button]}" />
                                                    </Grid>
                                                </StackPanel>
                                            </Border>
                                        </StackPanel>
                                    </StackPanel>
                                    <Grid x:Name="PART_UserLayout"
                                          Grid.Row="1"
                                          RowSpacing="16">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="*" />
                                        </Grid.RowDefinitions>
                                        <Border x:Name="PART_UserDetailsPanel"
                                                Grid.Row="0"
                                                Background="{ThemeResource DaisyBase200Brush}"
                                                BorderBrush="{ThemeResource DaisyBase300Brush}"
                                                BorderThickness="1"
                                                CornerRadius="12"
                                                Padding="12">
                                            <StackPanel Orientation="Vertical"
                                                        Spacing="12">
                                                <TextBlock x:Uid="KanbanUsers.Details.Title"
                                                           Style="{ThemeResource SubtitleTextBlockStyle}"
                                                           Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                           Text="{Binding [Kanban_Users_Details_Title]}" />
                                                <Border x:Name="PART_UserDetailsCard"
                                                        Background="{ThemeResource DaisyBase100Brush}"
                                                        BorderBrush="{ThemeResource DaisyBase300Brush}"
                                                        BorderThickness="1"
                                                        CornerRadius="12"
                                                        Padding="12"
                                                        Visibility="{Binding Tag.HasSelection, ElementName=PART_UsersRoot, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                        DataContext="{Binding Tag.SelectedUser, ElementName=PART_UsersRoot}">
                                                    <controls:WrapPanel Orientation="Horizontal"
                                                                        Spacing="16"
                                                                        VerticalSpacing="8">
                                                        <controls:DaisyAvatar Size="Large"
                                                                              Initials="{Binding Initials}"
                                                                              IsPlaceholder="{Binding IsAvatarPlaceholder}"
                                                                              Source="{Binding AvatarSource}"
                                                                              Status="{Binding AvatarStatus}" />
                                                        <TextBlock Style="{ThemeResource SubtitleTextBlockStyle}"
                                                                   Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                   Text="{Binding DisplayName}"
                                                                   TextWrapping="Wrap"
                                                                   VerticalAlignment="Top" />
                                                        <StackPanel Orientation="Vertical"
                                                                    Spacing="8"
                                                                    Visibility="{Binding Tag.CanLinkSelectedUser, ElementName=PART_UsersRoot, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                            <StackPanel Orientation="Vertical"
                                                                        Spacing="4"
                                                                        Visibility="{Binding Tag.HasLinkedLocalUser, ElementName=PART_UsersRoot, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                                <TextBlock Style="{ThemeResource CaptionTextBlockStyle}"
                                                                           Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                           Text="{Binding DataContext[Kanban_Users_LinkLocal_Label], ElementName=PART_UsersRoot}"
                                                                           TextWrapping="Wrap" />
                                                               <TextBlock Style="{ThemeResource BodyTextBlockStyle}"
                                                                          Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                          Text="{Binding Tag.LinkedLocalUserName, ElementName=PART_UsersRoot}"
                                                                          TextWrapping="Wrap" />
                                                            </StackPanel>
                                                        </StackPanel>
                                                        <StackPanel Orientation="Vertical"
                                                                    Spacing="8"
                                                                    Visibility="{Binding Tag.CanLinkSelectedUser, ElementName=PART_UsersRoot, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                            <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                                  Command="{Binding Tag.LinkLocalUserCommand, ElementName=PART_UsersRoot}"
                                                                                  Content="{Binding DataContext[Kanban_Users_LinkLocal_Button], ElementName=PART_UsersRoot}"
                                                                                  Variant="Primary"
                                                                                  Size="Small"
                                                                                  HorizontalAlignment="Left"
                                                                                  AutomationProperties.Name="{Binding DataContext[Kanban_Users_LinkLocal_Button], ElementName=PART_UsersRoot}" />
                                                            <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                                  Command="{Binding Tag.UnlinkLocalUserCommand, ElementName=PART_UsersRoot}"
                                                                                  Content="{Binding DataContext[Kanban_Users_UnlinkLocal_Button], ElementName=PART_UsersRoot}"
                                                                                  Variant="Ghost"
                                                                                  Size="Small"
                                                                                  HorizontalAlignment="Left"
                                                                                  Visibility="{Binding Tag.HasLinkedLocalUser, ElementName=PART_UsersRoot, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                                                  AutomationProperties.Name="{Binding DataContext[Kanban_Users_UnlinkLocal_Button], ElementName=PART_UsersRoot}" />
                                                        </StackPanel>
                                                        <StackPanel Orientation="Vertical"
                                                                    Spacing="8"
                                                                    Visibility="{Binding Tag.IsLocalProvider, ElementName=PART_UsersRoot, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                            <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                                  x:Uid="KanbanUsers.Details.Remove"
                                                                                  Command="{Binding Tag.RemoveUserCommand, ElementName=PART_UsersRoot}"
                                                                                  Content="{Binding DataContext[Kanban_Users_Remove_Button], ElementName=PART_UsersRoot}"
                                                                                  Variant="Error"
                                                                                  Size="Small"
                                                                                  HorizontalAlignment="Left"
                                                                                  AutomationProperties.Name="{Binding DataContext[Kanban_Users_Remove_Button], ElementName=PART_UsersRoot}" />
                                                        </StackPanel>
                                                    </controls:WrapPanel>
                                                </Border>
                                                <Border x:Name="PART_UserDetailsEmptyCard"
                                                        x:Uid="KanbanUsers.Details.Empty"
                                                        Background="{ThemeResource DaisyBase100Brush}"
                                                        BorderBrush="{ThemeResource DaisyBase300Brush}"
                                                        BorderThickness="1"
                                                        CornerRadius="12"
                                                        Padding="12"
                                                        Visibility="{Binding Tag.IsSelectionPromptVisible, ElementName=PART_UsersRoot, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                    <StackPanel Orientation="Vertical"
                                                                Spacing="8">
                                                        <TextBlock Style="{ThemeResource SubtitleTextBlockStyle}"
                                                                   Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                   Text="{Binding [Kanban_Users_SelectPrompt_Title]}"
                                                                   TextWrapping="Wrap" />
                                                        <TextBlock Style="{ThemeResource BodyTextBlockStyle}"
                                                                   Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                   Text="{Binding [Kanban_Users_SelectPrompt_Message]}"
                                                                   TextWrapping="Wrap" />
                                                    </StackPanel>
                                                </Border>
                                            </StackPanel>
                                        </Border>
                                        <Border x:Name="PART_UserListPanel"
                                                Grid.Row="1"
                                                Background="{ThemeResource DaisyBase200Brush}"
                                                BorderBrush="{ThemeResource DaisyBase300Brush}"
                                                BorderThickness="1"
                                                CornerRadius="12"
                                                Padding="12">
                                            <Grid RowSpacing="12">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto" />
                                                    <RowDefinition Height="*" />
                                                </Grid.RowDefinitions>
                                                <ProgressRing Grid.Row="0"
                                                              IsActive="{Binding Tag.IsLoading, ElementName=PART_UsersRoot}"
                                                              Foreground="{ThemeResource DaisyAccentBrush}"
                                                              Visibility="{Binding Tag.IsLoading, ElementName=PART_UsersRoot, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                                <ListView Grid.Row="1"
                                                          ItemsSource="{Binding Tag.FilteredUsers, ElementName=PART_UsersRoot}"
                                                          SelectedItem="{Binding Tag.SelectedUser, ElementName=PART_UsersRoot, Mode=TwoWay}"
                                                          SelectionMode="Single"
                                                          IsItemClickEnabled="True"
                                                          MinHeight="360"
                                                          MaxHeight="720"
                                                          ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                          ScrollViewer.VerticalScrollBarVisibility="Auto">
                                                    <ListView.ItemsPanel>
                                                        <ItemsPanelTemplate>
                                                            <controls:WrapPanel Orientation="Horizontal"
                                                                                HorizontalSpacing="12"
                                                                                VerticalSpacing="12" />
                                                        </ItemsPanelTemplate>
                                                    </ListView.ItemsPanel>
                                                    <ListView.ItemTemplate>
                                                        <DataTemplate>
                                                            <controls:DaisyCard x:Name="UserCard"
                                                                                Variant="Compact"
                                                                                BodyPadding="12"
                                                                                BorderBrush="{ThemeResource DaisyBase300Brush}"
                                                                                BorderThickness="1"
                                                                                CornerRadius="12"
                                                                                MinWidth="224"
                                                                                MaxWidth="320">
                                                                <Grid ColumnSpacing="12">
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto" />
                                                                        <ColumnDefinition Width="*" />
                                                                    </Grid.ColumnDefinitions>
                                                                    <controls:DaisyAvatar Size="Small"
                                                                                          Initials="{Binding Initials}"
                                                                                          IsPlaceholder="{Binding IsAvatarPlaceholder}"
                                                                                          Source="{Binding AvatarSource}"
                                                                                          Status="{Binding AvatarStatus}" />
                                                                    <StackPanel Grid.Column="1"
                                                                                Orientation="Vertical"
                                                                                Spacing="4">
                                                                        <TextBlock Style="{ThemeResource BodyTextBlockStyle}"
                                                                                   Foreground="{Binding ElementName=UserCard, Path=Foreground}"
                                                                                   Text="{Binding DisplayName}"
                                                                                   TextWrapping="Wrap" />
                                                                    </StackPanel>
                                                                </Grid>
                                                            </controls:DaisyCard>
                                                        </DataTemplate>
                                                    </ListView.ItemTemplate>
                                                </ListView>
                                                <Border x:Uid="KanbanUsers.Empty.State"
                                                        Grid.Row="1"
                                                        Background="{ThemeResource DaisyBase100Brush}"
                                                        BorderBrush="{ThemeResource DaisyBase300Brush}"
                                                        BorderThickness="1"
                                                        CornerRadius="12"
                                                        Padding="12"
                                                        Visibility="{Binding Tag.IsEmptyStateVisible, ElementName=PART_UsersRoot, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                    <StackPanel Orientation="Vertical"
                                                                Spacing="8">
                                                        <TextBlock Style="{ThemeResource SubtitleTextBlockStyle}"
                                                                   Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                   Text="{Binding [Kanban_Users_EmptyTitle]}"
                                                                   TextWrapping="Wrap" />
                                                        <TextBlock Style="{ThemeResource BodyTextBlockStyle}"
                                                                   Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                   Text="{Binding [Kanban_Users_EmptyMessage]}"
                                                                   TextWrapping="Wrap" />
                                                    </StackPanel>
                                                </Border>
                                                <Border x:Uid="KanbanUsers.Search.Empty"
                                                        Grid.Row="1"
                                                        Background="{ThemeResource DaisyBase100Brush}"
                                                        BorderBrush="{ThemeResource DaisyBase300Brush}"
                                                        BorderThickness="1"
                                                        CornerRadius="12"
                                                        Padding="12"
                                                        Visibility="{Binding Tag.IsSearchEmptyStateVisible, ElementName=PART_UsersRoot, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                    <StackPanel Orientation="Vertical"
                                                                Spacing="8">
                                                        <TextBlock Style="{ThemeResource SubtitleTextBlockStyle}"
                                                                   Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                   Text="{Binding [Kanban_Users_NoResultsTitle]}"
                                                                   TextWrapping="Wrap" />
                                                        <TextBlock Style="{ThemeResource BodyTextBlockStyle}"
                                                                   Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                   Text="{Binding [Kanban_Users_NoResultsMessage]}"
                                                                   TextWrapping="Wrap" />
                                                    </StackPanel>
                                                </Border>
                                            </Grid>
                                        </Border>
                                    </Grid>
                                </Grid>
                            </Border>
                        </ScrollViewer>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style TargetType="kanban:FlowKanban">
        <Setter Property="Background"
                Value="{ThemeResource DaisyBase100Brush}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="kanban:FlowKanban">
                    <Grid x:Name="PART_BoardRoot"
                          Background="{TemplateBinding Background}"
                          Tag="{Binding RelativeSource={RelativeSource TemplatedParent}}"
                          DataContext="{Binding Localization, RelativeSource={RelativeSource TemplatedParent}}"
                          AutomationProperties.Name="{Binding Board.Title, RelativeSource={RelativeSource TemplatedParent}}"
                          controls:DaisyBaseContentControl.NeumorphicScopeEnabled="False">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <!-- Board Header -->
                        <Grid x:Name="PART_BoardHeader"
                              Grid.Row="0"
                              Margin="16,12,16,4"
                              Background="Transparent"
                              RowSpacing="4"
                              Visibility="{Binding IsBoardViewActive, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="BoardHeaderLayoutStates">
                                    <VisualState x:Name="Narrow" />
                                    <VisualState x:Name="Wide">
                                        <VisualState.StateTriggers>
                                            <AdaptiveTrigger MinWindowWidth="640" />
                                        </VisualState.StateTriggers>
                                        <VisualState.Setters>
                                            <Setter Target="PART_SearchInput.(Grid.Row)" Value="0" />
                                            <Setter Target="PART_SearchInput.(Grid.Column)" Value="3" />
                                            <Setter Target="PART_SearchInput.(Grid.ColumnSpan)" Value="1" />
                                            <Setter Target="PART_SearchInput.Margin" Value="8,0,0,0" />
                                            <Setter Target="PART_SearchInput.Width" Value="200" />
                                            <Setter Target="PART_FilterToggleHost.(Grid.Row)" Value="0" />
                                            <Setter Target="PART_FilterToggleHost.(Grid.Column)" Value="4" />
                                            <Setter Target="PART_FilterToggleHost.Margin" Value="4,0,0,0" />
                                        </VisualState.Setters>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <TextBlock x:Name="PART_BoardTitle"
                                       Grid.Row="0"
                                       Grid.Column="1"
                                       Text="{Binding Board.Title, RelativeSource={RelativeSource TemplatedParent}}"
                                       FontSize="20"
                                       FontWeight="Bold"
                                       Foreground="{ThemeResource DaisyBaseContentBrush}"
                                       VerticalAlignment="Center" />
                            <!-- Board menu popover (always visible) -->
                            <controls:DaisyPopover x:Name="PART_BoardMenuPopover"
                                                   Grid.Row="0"
                                                   Grid.Column="0"
                                                   Placement="Bottom"
                                                   VerticalOffset="0"
                                                   Opacity="1"
                                                   IsHitTestVisible="True"
                                                   controls:DaisyNeumorphic.IsEnabled="False"
                                                   VerticalAlignment="Center"
                                                   Margin="0,0,6,0"
                                                   AutomationProperties.Name="{Binding [Kanban_Home_BoardMenu]}"
                                                   >
                                <ToolTipService.ToolTip>
                                    <ToolTip Content="{Binding [Kanban_Home_BoardMenu]}" />
                                </ToolTipService.ToolTip>
                                <controls:DaisyPopover.Resources>
                                    <ResourceDictionary>
                                        <!-- Let DaisyMenu draw the container (avoid double border). -->
                                        <SolidColorBrush x:Key="DaisyPopoverBackground" Color="Transparent" />
                                        <SolidColorBrush x:Key="DaisyPopoverBorderBrush" Color="Transparent" />
                                    </ResourceDictionary>
                                </controls:DaisyPopover.Resources>
                                <controls:DaisyPopover.TriggerContent>
                                    <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                          x:Name="PART_EditBoardBtn"
                                                          Variant="Ghost"
                                                          Shape="Square"
                                                          IsTabStop="False"
                                                          controls:DaisyNeumorphic.IsEnabled="False">
                                        <controls:DaisyIconText IconData="{StaticResource DaisyIconHamburger}" />
                                    </controls:DaisyButton>
                                </controls:DaisyPopover.TriggerContent>
                                <controls:DaisyPopover.PopoverContent>
                                    <controls:DaisyMenu Orientation="Vertical">
                                        <controls:DaisyMenu.Content>
                                            <StackPanel>
                                                <controls:DaisyMenuItem Command="{Binding Tag.EditBoardCommand, ElementName=PART_BoardRoot}">
                                                    <Grid ColumnDefinitions="12,*"
                                                          ColumnSpacing="6"
                                                          VerticalAlignment="Center">
                                                        <!-- icon gutter (reserved space, Windows-style) -->
                                                        <controls:DaisyIconText Grid.Column="0"
                                                                                IconData="{StaticResource DaisyIconCheck}"
                                                                                IconSize="12"
                                                                                Opacity="0"
                                                                                IsHitTestVisible="False"
                                                                                IsTabStop="False"
                                                                                VerticalAlignment="Center"
                                                                                HorizontalAlignment="Center" />
                                                        <TextBlock Grid.Column="1"
                                                                   Text="{Binding DataContext[Kanban_Board_EditMenu], ElementName=PART_BoardRoot}"
                                                                   Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                   VerticalAlignment="Center" />
                                                    </Grid>
                                                </controls:DaisyMenuItem>
                                                <controls:DaisyMenuItem x:Name="PART_BoardMenuResizeItem"
                                                                        Visibility="{Binding Tag.IsCompactLayoutEnabled, ElementName=PART_BoardRoot, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Invert}">
                                                    <Grid ColumnDefinitions="12,*"
                                                          ColumnSpacing="6"
                                                          VerticalAlignment="Center">
                                                        <controls:DaisyIconText Grid.Column="0"
                                                                                IconData="{StaticResource DaisyIconCheck}"
                                                                                IconSize="12"
                                                                                Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                                Opacity="1"
                                                                                IsHitTestVisible="False"
                                                                                IsTabStop="False"
                                                                                VerticalAlignment="Center"
                                                                                HorizontalAlignment="Center"
                                                                                Visibility="{Binding Tag.IsColumnResizeEnabled, ElementName=PART_BoardRoot, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                                        <TextBlock Grid.Column="1"
                                                                   Text="{Binding DataContext[Kanban_Column_ResizeGrip], ElementName=PART_BoardRoot}"
                                                                   Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                   VerticalAlignment="Center" />
                                                    </Grid>
                                                </controls:DaisyMenuItem>
                                                <controls:DaisyMenuItem Command="{Binding Tag.SaveToFileCommand, ElementName=PART_BoardRoot}"
                                                                        Visibility="{Binding Tag.IsFilePickerAvailable, ElementName=PART_BoardRoot, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                    <Grid ColumnDefinitions="12,*"
                                                          ColumnSpacing="6"
                                                          VerticalAlignment="Center">
                                                        <controls:DaisyIconText Grid.Column="0"
                                                                                IconData="{StaticResource DaisyIconCheck}"
                                                                                IconSize="12"
                                                                                Opacity="0"
                                                                                IsHitTestVisible="False"
                                                                                IsTabStop="False"
                                                                                VerticalAlignment="Center"
                                                                                HorizontalAlignment="Center" />
                                                        <TextBlock Grid.Column="1"
                                                                   Text="{Binding DataContext[Kanban_Board_SaveToFile], ElementName=PART_BoardRoot}"
                                                                   Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                   VerticalAlignment="Center" />
                                                    </Grid>
                                                </controls:DaisyMenuItem>
                                                <controls:DaisyMenuItem Command="{Binding Tag.LoadFromFileCommand, ElementName=PART_BoardRoot}"
                                                                        Visibility="{Binding Tag.IsFilePickerAvailable, ElementName=PART_BoardRoot, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                    <Grid ColumnDefinitions="12,*"
                                                          ColumnSpacing="6"
                                                          VerticalAlignment="Center">
                                                        <controls:DaisyIconText Grid.Column="0"
                                                                                IconData="{StaticResource DaisyIconCheck}"
                                                                                IconSize="12"
                                                                                Opacity="0"
                                                                                IsHitTestVisible="False"
                                                                                IsTabStop="False"
                                                                                VerticalAlignment="Center"
                                                                                HorizontalAlignment="Center" />
                                                        <TextBlock Grid.Column="1"
                                                                   Text="{Binding DataContext[Kanban_Board_LoadFromFile], ElementName=PART_BoardRoot}"
                                                                   Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                   VerticalAlignment="Center" />
                                                    </Grid>
                                                </controls:DaisyMenuItem>
                                            </StackPanel>
                                        </controls:DaisyMenu.Content>
                                    </controls:DaisyMenu>
                                </controls:DaisyPopover.PopoverContent>
                            </controls:DaisyPopover>
                            <controls:DaisyInput Style="{StaticResource KanbanFocusInputStyle}"
                                                 x:Name="PART_SearchInput"
                                                 Grid.Row="1"
                                                 Grid.Column="0"
                                                 Grid.ColumnSpan="4"
                                                 Margin="0,8,0,0"
                                                 MinWidth="200"
                                                 Width="Auto"
                                                 Variant="Bordered"
                                                 Size="Small"
                                                 StartIconData="{StaticResource DaisyIconSearch}"
                                                 VerticalAlignment="Center"
                                                 PlaceholderText="{Binding [Kanban_Filter_SearchPlaceholder]}"
                                                 AutomationProperties.Name="{Binding [Kanban_Filter_SearchPlaceholder]}"
                                                 Text="{Binding SearchText, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                            <!-- Filter Toggle Button -->
                            <Grid x:Name="PART_FilterToggleHost"
                                  Grid.Row="1"
                                  Grid.Column="4"
                                  VerticalAlignment="Center"
                                  Margin="4,8,0,0">
                                <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                      x:Name="PART_FilterToggleBtn"
                                                      Command="{Binding Tag.ToggleFilterExpandedCommand, ElementName=PART_BoardRoot}"
                                                      Variant="Ghost"
                                                      Shape="Square"
                                                      Size="Small"
                                                      AutomationProperties.Name="{Binding [Kanban_Filter_ExpandFilters]}">
                                    <ToolTipService.ToolTip>
                                        <ToolTip Content="{Binding [Kanban_Filter_ExpandFilters]}" />
                                    </ToolTipService.ToolTip>
                                    <controls:DaisyIconText IconData="{StaticResource DaisyIconFilter}"
                                                            IconSize="14" />
                                </controls:DaisyButton>
                                <!-- Active filter count badge -->
                                <Border x:Name="PART_FilterCountBadge"
                                        Background="{ThemeResource DaisyPrimaryBrush}"
                                        CornerRadius="8"
                                        Padding="4,1"
                                        MinWidth="16"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Top"
                                        Margin="0,-4,-4,0"
                                        IsHitTestVisible="False"
                                        Visibility="{Binding Tag.IsFilterActive, ElementName=PART_BoardRoot, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    <TextBlock Text="{Binding Tag.ActiveFilterCount, ElementName=PART_BoardRoot}"
                                               FontSize="10"
                                               FontWeight="Bold"
                                               Foreground="{ThemeResource DaisyPrimaryContentBrush}"
                                               HorizontalAlignment="Center" />
                                </Border>
                            </Grid>
                        </Grid>
                        <!-- Expandable Filter Bar Panel -->
                        <Border x:Name="PART_FilterBarPanel"
                                Grid.Row="1"
                                Grid.Column="0"
                                Margin="16,0,16,8"
                                Padding="12"
                                Background="{ThemeResource DaisyBase200Brush}"
                                BorderBrush="{ThemeResource DaisyBase300Brush}"
                                BorderThickness="1"
                                CornerRadius="8"
                                Visibility="{Binding Tag.IsFilterExpanded, ElementName=PART_BoardRoot, Converter={StaticResource BooleanToVisibilityConverter}}">
                            <Grid RowSpacing="12">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <!-- Filter Row 1: Priority and Status Filters -->
                                <controls:WrapPanel Grid.Row="0"
                                                    Orientation="Horizontal"
                                                    HorizontalSpacing="16"
                                                    VerticalSpacing="8">
                                    <!-- Priority Filter -->
                                    <StackPanel Orientation="Vertical" Spacing="4">
                                        <TextBlock Text="{Binding [Kanban_Filter_Priority]}"
                                                   Style="{ThemeResource CaptionTextBlockStyle}"
                                                   Foreground="{ThemeResource DaisyBaseContentBrush}" />
                                        <StackPanel Orientation="Horizontal" Spacing="8">
                                            <controls:DaisyCheckBox x:Name="PART_FilterPriorityLow"
                                                                    Content="Low"
                                                                    Size="Small"
                                                                    Variant="Info"
                                                                    IsChecked="{Binding Tag.FilterPriorityLow, ElementName=PART_BoardRoot, Mode=TwoWay}" />
                                            <controls:DaisyCheckBox x:Name="PART_FilterPriorityNormal"
                                                                    Content="Normal"
                                                                    Size="Small"
                                                                    Variant="Info"
                                                                    IsChecked="{Binding Tag.FilterPriorityNormal, ElementName=PART_BoardRoot, Mode=TwoWay}" />
                                            <controls:DaisyCheckBox x:Name="PART_FilterPriorityHigh"
                                                                    Content="High"
                                                                    Size="Small"
                                                                    Variant="Info"
                                                                    IsChecked="{Binding Tag.FilterPriorityHigh, ElementName=PART_BoardRoot, Mode=TwoWay}" />
                                            <controls:DaisyCheckBox x:Name="PART_FilterPriorityUrgent"
                                                                    Content="Urgent"
                                                                    Size="Small"
                                                                    Variant="Info"
                                                                    IsChecked="{Binding Tag.FilterPriorityUrgent, ElementName=PART_BoardRoot, Mode=TwoWay}" />
                                        </StackPanel>
                                    </StackPanel>
                                    <!-- Status + Assignee Filters -->
                                    <StackPanel Orientation="{utu:Responsive Narrowest=Vertical, Narrow=Vertical, Normal=Horizontal}"
                                                Spacing="{utu:Responsive Narrowest=8, Narrow=8, Normal=16}">
                                        <!-- Status Filters -->
                                        <StackPanel Orientation="Vertical" Spacing="4">
                                            <TextBlock Text="Status"
                                                       Style="{ThemeResource CaptionTextBlockStyle}"
                                                       Foreground="{ThemeResource DaisyBaseContentBrush}" />
                                            <StackPanel Orientation="Horizontal" Spacing="8">
                                                <controls:DaisyCheckBox x:Name="PART_FilterOverdue"
                                                                        Content="{Binding [Kanban_Filter_Overdue]}"
                                                                        Size="Small"
                                                                        Variant="Warning"
                                                                        IsChecked="{Binding Tag.FilterShowOverdue, ElementName=PART_BoardRoot, Mode=TwoWay}" />
                                                <controls:DaisyCheckBox x:Name="PART_FilterBlocked"
                                                                        Content="{Binding [Kanban_Filter_Blocked]}"
                                                                        Size="Small"
                                                                        Variant="Error"
                                                                        IsChecked="{Binding Tag.FilterShowBlocked, ElementName=PART_BoardRoot, Mode=TwoWay}" />
                                            </StackPanel>
                                        </StackPanel>
                                        <!-- Assignee Filter -->
                                        <StackPanel Orientation="Vertical" Spacing="4">
                                            <TextBlock Text="{Binding [Kanban_Filter_Assignee]}"
                                                       Style="{ThemeResource CaptionTextBlockStyle}"
                                                       Foreground="{ThemeResource DaisyBaseContentBrush}" />
                                            <controls:DaisySelect Style="{StaticResource KanbanFocusSelectStyle}"
                                                                  Width="180"
                                                                  ItemsSource="{Binding Tag.AssigneeFilterOptions, ElementName=PART_BoardRoot}"
                                                                  DisplayMemberPath="DisplayName"
                                                                  SelectedItem="{Binding Tag.SelectedAssigneeFilter, ElementName=PART_BoardRoot, Mode=TwoWay}"
                                                                  PlaceholderText="{Binding [Kanban_Filter_Assignee]}"
                                                                  Size="Small"
                                                                  IsEnabled="{Binding Tag.HasAssigneeOptions, ElementName=PART_BoardRoot}" />
                                        </StackPanel>
                                    </StackPanel>
                                    <!-- Due Date Filter -->
                                    <StackPanel Orientation="Vertical" Spacing="4">
                                        <TextBlock Text="{Binding [Kanban_Filter_DueDate]}"
                                                   Style="{ThemeResource CaptionTextBlockStyle}"
                                                   Foreground="{ThemeResource DaisyBaseContentBrush}" />
                                        <StackPanel Orientation="{utu:Responsive Narrowest=Vertical, Narrow=Vertical, Normal=Horizontal}"
                                                    Spacing="8">
                                            <!-- Quick Filters -->
                                            <StackPanel Orientation="Horizontal" Spacing="8">
                                                <controls:DaisyCheckBox x:Name="PART_FilterDueToday"
                                                                        Content="{Binding [Kanban_Filter_QuickToday]}"
                                                                        Size="Small"
                                                                        Variant="Info"
                                                                        IsChecked="{Binding Tag.FilterDueToday, ElementName=PART_BoardRoot, Mode=TwoWay}" />
                                                <controls:DaisyCheckBox x:Name="PART_FilterDueWeek"
                                                                        Content="{Binding [Kanban_Filter_QuickThisWeek]}"
                                                                        Size="Small"
                                                                        Variant="Info"
                                                                        IsChecked="{Binding Tag.FilterDueThisWeek, ElementName=PART_BoardRoot, Mode=TwoWay}" />
                                            </StackPanel>
                                            <!-- Date Range Pickers -->
                                            <StackPanel Orientation="Horizontal" Spacing="4">
                                                <controls:DaisyCalendarDatePicker x:Name="PART_FilterDateFrom"
                                                                                   PlaceholderText="{Binding [Kanban_Filter_DateFrom]}"
                                                                                   Size="Small"
                                                                                   Variant="Bordered"
                                                                                   Width="120" />
                                                <TextBlock Text=""
                                                           VerticalAlignment="Center"
                                                           Foreground="{ThemeResource DaisyBaseContentBrush}" />
                                                <controls:DaisyCalendarDatePicker x:Name="PART_FilterDateTo"
                                                                                   PlaceholderText="{Binding [Kanban_Filter_DateTo]}"
                                                                                   Size="Small"
                                                                                   Variant="Bordered"
                                                                                   Width="120" />
                                            </StackPanel>
                                        </StackPanel>
                                    </StackPanel>
                                </controls:WrapPanel>
                                <!-- Filter Row 2: Actions -->
                                <StackPanel Grid.Row="1"
                                            Orientation="Horizontal"
                                            Spacing="8"
                                            HorizontalAlignment="Left">
                                    <!-- Clear All -->
                                    <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                          x:Name="PART_ClearFiltersBtn"
                                                          Command="{Binding Tag.ClearFilterCommand, ElementName=PART_BoardRoot}"
                                                          Content="{Binding [Kanban_Filter_ClearAll]}"
                                                          Size="ExtraSmall"
                                                          Variant="Secondary"
                                                          Visibility="{Binding Tag.IsFilterActive, ElementName=PART_BoardRoot, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                    <!-- Filter Presets Dropdown -->
                                    <controls:DaisyPopover x:Name="PART_FilterPresetsPopover"
                                                           Placement="Bottom"
                                                           controls:DaisyNeumorphic.IsEnabled="False"
                                                           Visibility="{Binding Tag.HasFilterPresets, ElementName=PART_BoardRoot, Converter={StaticResource BooleanToVisibilityConverter}}">
                                        <controls:DaisyPopover.Resources>
                                            <ResourceDictionary>
                                                <StaticResource x:Key="DaisyPopoverBackground" ResourceKey="DaisyBase100Brush" />
                                                <StaticResource x:Key="DaisyPopoverBorderBrush" ResourceKey="DaisyBase300Brush" />
                                            </ResourceDictionary>
                                        </controls:DaisyPopover.Resources>
                                        <controls:DaisyPopover.TriggerContent>
                                            <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                  Content="{Binding [Kanban_Filter_Presets]}"
                                                                  Size="ExtraSmall"
                                                                  IconData="{StaticResource DaisyIconChevronDown}"
                                                                  IconPlacement="Right" />
                                        </controls:DaisyPopover.TriggerContent>
                                        <controls:DaisyPopover.PopoverContent>
                                            <StackPanel MinWidth="160" MaxHeight="200">
                                                <muxc:ItemsRepeater ItemsSource="{Binding Tag.FilterPresets, ElementName=PART_BoardRoot}">
                                                    <muxc:ItemsRepeater.ItemTemplate>
                                                        <DataTemplate>
                                                            <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                                  Content="{Binding Name}"
                                                                                  Command="{Binding Tag.LoadFilterPresetCommand, ElementName=PART_BoardRoot}"
                                                                                  CommandParameter="{Binding}"
                                                                                  Size="Small"
                                                                                  HorizontalContentAlignment="Left"
                                                                                  HorizontalAlignment="Stretch" />
                                                        </DataTemplate>
                                                    </muxc:ItemsRepeater.ItemTemplate>
                                                </muxc:ItemsRepeater>
                                            </StackPanel>
                                        </controls:DaisyPopover.PopoverContent>
                                    </controls:DaisyPopover>
                                    <!-- Save Preset -->
                                    <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                          x:Name="PART_SavePresetBtn"
                                                          Command="{Binding Tag.SaveFilterPresetCommand, ElementName=PART_BoardRoot}"
                                                          Content="{Binding [Kanban_Filter_SavePreset]}"
                                                          Size="ExtraSmall"
                                                          Variant="Secondary"
                                                          Visibility="{Binding Tag.IsFilterActive, ElementName=PART_BoardRoot, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                </StackPanel>
                            </Grid>
                        </Border>
                        <kanban:FlowKanbanHome x:Name="PART_HomeView"
                                               Grid.Row="0"
                                               Grid.RowSpan="4"
                                               Grid.Column="0"
                                               Visibility="{Binding IsHomeViewActive, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}"
                                               Boards="{Binding Boards, RelativeSource={RelativeSource TemplatedParent}}"
                                               OpenBoardCommand="{TemplateBinding OpenBoardCommand}"
                                               CreateBoardCommand="{TemplateBinding CreateBoardCommand}"
                                               CreateDemoBoardCommand="{TemplateBinding CreateDemoBoardCommand}"
                                               RenameBoardHomeCommand="{TemplateBinding RenameBoardHomeCommand}"
                                               DeleteBoardCommand="{TemplateBinding DeleteBoardCommand}"
                                               DuplicateBoardCommand="{TemplateBinding DuplicateBoardCommand}"
                                               ExportBoardCommand="{TemplateBinding ExportBoardCommand}"
                                               Localization="{Binding Localization, RelativeSource={RelativeSource TemplatedParent}}"
                                               ShowWelcomeMessage="{Binding ShowWelcomeMessage, RelativeSource={RelativeSource TemplatedParent}}"
                                               WelcomeMessageTitle="{Binding WelcomeMessageTitle, RelativeSource={RelativeSource TemplatedParent}}"
                                               WelcomeMessageSubtitle="{Binding WelcomeMessageSubtitle, RelativeSource={RelativeSource TemplatedParent}}" />
                        <kanban:FlowKanbanUserManagement x:Name="PART_UserManagementView"
                                                         Grid.Row="0"
                                                         Grid.RowSpan="4"
                                                         Grid.Column="0"
                                                         Visibility="{Binding IsUserManagementViewActive, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                         IsActive="{Binding IsUserManagementViewActive, RelativeSource={RelativeSource TemplatedParent}}"
                                                         UserProvider="{Binding UserProvider, RelativeSource={RelativeSource TemplatedParent}}"
                                                         Localization="{Binding Localization, RelativeSource={RelativeSource TemplatedParent}}" />
                        <Grid x:Name="PART_BoardContentHost"
                              Grid.Row="2"
                              Grid.Column="0"
                              Visibility="{Binding IsBoardViewActive, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                            <!-- Main Board -->
                            <ScrollViewer HorizontalScrollBarVisibility="Auto"
                                          VerticalScrollBarVisibility="Disabled"
                                          Visibility="{Binding IsStandardLayoutVisible, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                                <Grid>
                                    <controls:DaisyResizableColumnsHost x:Name="PART_ColumnsItemsControl"
                                                                        ItemsSource="{Binding StandardColumnsSource, RelativeSource={RelativeSource TemplatedParent}}"
                                                                        Padding="16"
                                                                        ColumnSpacing="8"
                                                                        ColumnWidth="{Binding Tag.ColumnWidth, ElementName=PART_BoardRoot, Mode=TwoWay}"
                                                                        MinColumnWidth="{Binding Tag.MinColumnWidth, ElementName=PART_BoardRoot}"
                                                                        MaxColumnWidth="{Binding Tag.MaxColumnWidth, ElementName=PART_BoardRoot}"
                                                                        IsGripEnabled="{Binding Tag.IsColumnResizeEnabled, ElementName=PART_BoardRoot}"
                                                                        AccessibleText="{Binding DataContext[Kanban_Column_ResizeGrip], ElementName=PART_BoardRoot}">
                                        <ItemsControl.ItemContainerStyle>
                                            <Style TargetType="ContentPresenter">
                                                <Setter Property="Visibility"
                                                        Value="{Binding IsArchiveColumnVisible, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                            </Style>
                                        </ItemsControl.ItemContainerStyle>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <kanban:FlowKanbanColumn x:Name="PART_KanbanColumn"
                                                                         ColumnData="{Binding}"
                                                                         IsCollapsed="{Binding IsCollapsed, Mode=TwoWay}"
                                                                         ParentKanban="{Binding Tag, ElementName=PART_BoardRoot}"
                                                                         AddCardPlacement="{Binding Tag.AddCardPlacement, ElementName=PART_BoardRoot}"
                                                                         Background="{ThemeResource DaisyBase200Brush}"
                                                                         CornerRadius="12"
                                                                         Padding="2"
                                                                         Margin="2"
                                                                         BorderBrush="{ThemeResource DaisyBase300Brush}"
                                                                         BorderThickness="1"
                                                                         MaxHeight="{Binding Tag.CompactColumnMaxHeight, ElementName=PART_BoardRoot}"
                                                                         Visibility="{Binding IsArchiveColumnVisible, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                    <Grid>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="Auto" />
                                                            <RowDefinition Height="Auto" />
                                                            <RowDefinition Height="*" />
                                                            <RowDefinition Height="Auto" />
                                                        </Grid.RowDefinitions>
                                                        <!-- Column Header -->
                                                        <Grid Grid.Row="0"
                                                              Visibility="{Binding ShowColumnHeader, ElementName=PART_KanbanColumn, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                            <Grid x:Name="PART_ColumnHeaderGrid"
                                                                  Margin="0,0,0,8"
                                                                  Background="Transparent"
                                                                  Visibility="{Binding IsCollapsed, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Invert}">
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto" />
                                                                    <RowDefinition Height="Auto" />
                                                                </Grid.RowDefinitions>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="Auto" />
                                                                    <ColumnDefinition Width="*" />
                                                                    <ColumnDefinition Width="Auto" />
                                                                    <ColumnDefinition Width="Auto" />
                                                                </Grid.ColumnDefinitions>
                                                                <Border x:Name="PART_ColumnGrip"
                                                                        Grid.Row="0"
                                                                        Background="Transparent"
                                                                        Padding="4"
                                                                        CornerRadius="4"
                                                                        VerticalAlignment="Center"
                                                                        AutomationProperties.Name="{Binding DataContext[Kanban_Column_Reorder], ElementName=PART_BoardRoot}">
                                                                    <controls:DaisyIconText IconData="{StaticResource DaisyIconNestedSquares}"
                                                                                            IconSize="12"
                                                                                            Foreground="{Binding ElementName=PART_ColumnTitle, Path=Foreground}" />
                                                                </Border>
                                                                <TextBlock x:Name="PART_ColumnTitle"
                                                                           Grid.Row="0"
                                                                           Grid.Column="1"
                                                                           Text="{Binding DisplayTitle}"
                                                                           FontSize="18"
                                                                           Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                           FontWeight="Bold"
                                                                           TextTrimming="CharacterEllipsis"
                                                                           TextWrapping="NoWrap"
                                                                           VerticalAlignment="Center" />
                                                                <StackPanel x:Name="PART_ColumnHeaderIcons"
                                                                            Grid.Row="0"
                                                                            Grid.Column="1"
                                                                            Orientation="Horizontal"
                                                                            Spacing="8"
                                                                            HorizontalAlignment="Right">
                                                                    <controls:DaisyBadge Variant="Neutral"
                                                                                         Size="Small"
                                                                                         Content="{Binding DataContext[Kanban_ArchiveColumn], ElementName=PART_BoardRoot}"
                                                                                         Visibility="{Binding IsArchiveColumn, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                                                         AutomationProperties.Name="{Binding DataContext[Kanban_ArchiveColumn], ElementName=PART_BoardRoot}">
                                                                        <ToolTipService.ToolTip>
                                                                            <ToolTip Content="{Binding DataContext[Kanban_ArchiveColumn], ElementName=PART_BoardRoot}"
                                                                                     IsEnabled="{Binding Tag.IsColumnTooltipsEnabled, ElementName=PART_BoardRoot}" />
                                                                        </ToolTipService.ToolTip>
                                                                    </controls:DaisyBadge>
                                                                    <!-- Task Count Badge -->
                                                                    <Border x:Name="PART_TaskCountBadge"
                                                                            Background="{ThemeResource DaisySecondaryBrush}"
                                                                            CornerRadius="10"
                                                                            Padding="6,2"
                                                                            VerticalAlignment="Center">
                                                                        <TextBlock x:Name="PART_TaskCountText"
                                                                                   Text="{Binding WipDisplay}"
                                                                                   FontSize="11"
                                                                                   FontWeight="SemiBold"
                                                                                   Foreground="{ThemeResource DaisySecondaryContentBrush}" />
                                                                    </Border>
                                                                    <controls:DaisyIconText IconData="{StaticResource DaisyIconWarning}"
                                                                                            IconSize="12"
                                                                                            Foreground="{ThemeResource DaisyWarningBrush}"
                                                                                            VerticalAlignment="Center"
                                                                                            Visibility="{Binding IsWipExceeded, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                                        <ToolTipService.ToolTip>
                                                                            <ToolTip Content="{Binding DataContext[Kanban_WipLimitExceeded], ElementName=PART_BoardRoot}"
                                                                                     IsEnabled="{Binding Tag.IsColumnTooltipsEnabled, ElementName=PART_BoardRoot}" />
                                                                        </ToolTipService.ToolTip>
                                                                    </controls:DaisyIconText>
                                                                    <controls:DaisyIconText IconData="{StaticResource DaisyIconInfo}"
                                                                                            IconSize="12"
                                                                                            Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                                            VerticalAlignment="Center"
                                                                                            Visibility="{Binding HasPolicy, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                                                            AutomationProperties.Name="{Binding DataContext[Kanban_Policy_Info], ElementName=PART_BoardRoot}">
                                                                        <ToolTipService.ToolTip>
                                                                            <ToolTip Content="{Binding PolicyText}"
                                                                                     IsEnabled="{Binding Tag.IsColumnTooltipsEnabled, ElementName=PART_BoardRoot}" />
                                                                        </ToolTipService.ToolTip>
                                                                    </controls:DaisyIconText>
                                                                    <!-- Edit Title Button (shown on hover) -->
                                                                    <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                                          x:Name="PART_RenameBtn"
                                                                                          Command="{Binding Tag.EditColumnCommand, ElementName=PART_BoardRoot}"
                                                                                          CommandParameter="{Binding}"
                                                                                          Variant="Ghost"
                                                                                          Shape="Square"
                                                                                          Size="ExtraSmall"
                                                                                          Opacity="0"
                                                                                          IsHitTestVisible="False"
                                                                                          controls:DaisyNeumorphic.IsEnabled="False"
                                                                                          VerticalAlignment="Center"
                                                                                          AutomationProperties.Name="{Binding DataContext[Kanban_RenameSection], ElementName=PART_BoardRoot}">
                                                                        <ToolTipService.ToolTip>
                                                                            <ToolTip Content="{Binding DataContext[Kanban_RenameSection], ElementName=PART_BoardRoot}"
                                                                                     IsEnabled="{Binding Tag.IsColumnTooltipsEnabled, ElementName=PART_BoardRoot}" />
                                                                        </ToolTipService.ToolTip>
                                                                        <controls:DaisyIconText IconData="{StaticResource DaisyIconPencil}"
                                                                                                IconSize="12" />
                                                                    </controls:DaisyButton>
                                                                </StackPanel>
                                                                <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                                      x:Name="PART_CollapseBtn"
                                                                                      Grid.Row="0"
                                                                                      Grid.Column="2"
                                                                                      Visibility="{Binding Tag.IsCompactLayoutEnabled, ElementName=PART_BoardRoot, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Invert}"
                                                                                      Command="{Binding Tag.ToggleColumnCollapseCommand, ElementName=PART_BoardRoot}"
                                                                                      CommandParameter="{Binding}"
                                                                                      Variant="Ghost"
                                                                                      Shape="Square"
                                                                                      Size="ExtraSmall"
                                                                                      VerticalAlignment="Center"
                                                                                      AutomationProperties.Name="{Binding DataContext[Kanban_Column_ToggleCollapse], ElementName=PART_BoardRoot}">
                                                                    <ToolTipService.ToolTip>
                                                                        <ToolTip Content="{Binding DataContext[Kanban_Column_ToggleCollapse], ElementName=PART_BoardRoot}"
                                                                                 IsEnabled="{Binding Tag.IsColumnTooltipsEnabled, ElementName=PART_BoardRoot}" />
                                                                    </ToolTipService.ToolTip>
                                                                    <controls:DaisyIconText x:Name="PART_CollapseIcon"
                                                                                            IconData="{StaticResource DaisyIconChevronLeft}"
                                                                                            IconSize="12" />
                                                                </controls:DaisyButton>
                                                            </Grid>

                                                            <!-- Collapsed Header -->
                                                            <StackPanel x:Name="PART_CollapsedHeader"
                                                                        Visibility="{Binding IsCollapsed, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                                        Margin="0,0,0,8"
                                                                        HorizontalAlignment="Center"
                                                                        VerticalAlignment="Top"
                                                                        Spacing="4">
                                                                <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                                      x:Name="PART_CollapsedExpandBtn"
                                                                                      Variant="Ghost"
                                                                                      Shape="Square"
                                                                                      Size="ExtraSmall"
                                                                                      Visibility="{Binding Tag.IsCompactLayoutEnabled, ElementName=PART_BoardRoot, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Invert}"
                                                                                      Command="{Binding Tag.ToggleColumnCollapseCommand, ElementName=PART_BoardRoot}"
                                                                                      CommandParameter="{Binding}"
                                                                                      AutomationProperties.Name="{Binding DataContext[Kanban_Column_ToggleCollapse], ElementName=PART_BoardRoot}">
                                                                    <controls:DaisyIconText IconData="{StaticResource DaisyIconChevronRight}"
                                                                                            IconSize="12" />
                                                                </controls:DaisyButton>
                                                                <TextBlock x:Name="PART_CollapsedTitle"
                                                                           Text="{Binding DisplayTitle}"
                                                                           FontSize="18"
                                                                           Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                           FontWeight="Bold"
                                                                           TextWrapping="Wrap"
                                                                           TextTrimming="None"
                                                                           TextAlignment="Center"
                                                                           HorizontalAlignment="Center" />
                                                            </StackPanel>
                                                        </Grid>
                                                        <!-- Add Card (top) -->
                                                        <kanban:FlowKanbanAddCard x:Name="PART_AddCardTop"
                                                                                  Grid.Row="1"
                                                                                  ColumnData="{Binding}"
                                                                                  LaneId="{Binding LaneFilterId, ElementName=PART_KanbanColumn}"
                                                                                  InsertAtTop="True"
                                                                                  AddCardText="{Binding DataContext[Kanban_AddCard], ElementName=PART_BoardRoot}"
                                                                                  AddCardPlaceholderText="{Binding DataContext[Kanban_AddCardPlaceholder], ElementName=PART_BoardRoot}"
                                                                                  AddCardConfirmText="{Binding DataContext[Common_Add], ElementName=PART_BoardRoot}"
                                                                                  AddCardCancelText="{Binding DataContext[Common_Cancel], ElementName=PART_BoardRoot}"
                                                                                  Margin="0,0,0,8"
                                                                                  Visibility="{Binding ShowAddCardTop, ElementName=PART_KanbanColumn, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                                        <!-- Tasks (scrollable) -->
                                                        <Grid Grid.Row="2"
                                                              Margin="{Binding Padding, ElementName=PART_KanbanColumn, Converter={StaticResource KanbanTasksHostMarginConverter}}"
                                                              Visibility="{Binding ShowTasks, ElementName=PART_KanbanColumn, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                            <ListView x:Name="PART_TasksItemsControl"
                                                                      ItemsSource="{Binding TaskViews, ElementName=PART_KanbanColumn}"
                                                                      SelectionMode="None"
                                                                      IsItemClickEnabled="False"
                                                                      Padding="{Binding ColumnSize, ElementName=PART_KanbanColumn, Converter={StaticResource KanbanTasksListViewPaddingConverter}}"
                                                                      ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                                      ScrollViewer.VerticalScrollMode="Enabled"
                                                                      ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                                      ItemContainerStyle="{StaticResource KanbanTasksListViewItemContainerStyle}">
                                                                <ListView.ItemTemplate>
                                                                    <DataTemplate>
                                                                        <StackPanel Spacing="4"
                                                                                    HorizontalAlignment="Stretch">
                                                                            <TextBlock Text="{Binding Lane.Title}"
                                                                                       Style="{ThemeResource CaptionTextBlockStyle}"
                                                                                       Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                                       Visibility="{Binding ShowLaneHeader, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                                                            <kanban:FlowTaskCard Title="{Binding Task.Title}"
                                                                                                 Task="{Binding Task}"
                                                                                                 Palette="{Binding Task.Palette}"
                                                                                                 CloseCommand="{Binding Tag.RemoveCardCommand, ElementName=PART_BoardRoot}"
                                                                                                 CloseCommandParameter="{Binding Task}"
                                                                                                 EditCommand="{Binding Tag.EditCardCommand, ElementName=PART_BoardRoot}"
                                                                                                 Visibility="{Binding Task.IsSearchMatch, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                                                                 HorizontalAlignment="Stretch">
                                                                                <TextBlock Text="{Binding Task.Description}"
                                                                                           TextWrapping="Wrap"
                                                                                           FontSize="12" />
                                                                            </kanban:FlowTaskCard>
                                                                        </StackPanel>
                                                                    </DataTemplate>
                                                                </ListView.ItemTemplate>
                                                            </ListView>
                                                            <Canvas x:Name="PART_TaskDropIndicatorHost"
                                                                    IsHitTestVisible="False" />
                                                        </Grid>
                                                        <!-- Add Card (bottom) -->
                                                        <kanban:FlowKanbanAddCard x:Name="PART_AddCardBottom"
                                                                                  Grid.Row="3"
                                                                                  ColumnData="{Binding}"
                                                                                  LaneId="{Binding LaneFilterId, ElementName=PART_KanbanColumn}"
                                                                                  AddCardText="{Binding DataContext[Kanban_AddCard], ElementName=PART_BoardRoot}"
                                                                                  AddCardPlaceholderText="{Binding DataContext[Kanban_AddCardPlaceholder], ElementName=PART_BoardRoot}"
                                                                                  AddCardConfirmText="{Binding DataContext[Common_Add], ElementName=PART_BoardRoot}"
                                                                                  AddCardCancelText="{Binding DataContext[Common_Cancel], ElementName=PART_BoardRoot}"
                                                                                  Margin="0,8,0,0"
                                                                                  Visibility="{Binding ShowAddCardBottom, ElementName=PART_KanbanColumn, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                                    </Grid>
                                                </kanban:FlowKanbanColumn>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </controls:DaisyResizableColumnsHost>
                                    <Canvas x:Name="PART_ColumnDropLayer"
                                            IsHitTestVisible="False" />
                                </Grid>
                            </ScrollViewer>
                            <!-- Compact Board -->
                            <Border x:Name="PART_CompactColumnsHost"
                                    Padding="16,16,20,20"
                                    Visibility="{Binding IsCompactLayoutVisible, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                                <Grid RowSpacing="8">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="*" />
                                    </Grid.RowDefinitions>
                                    <controls:DaisySelect x:Name="PART_CompactColumnSelect"
                                                          Style="{StaticResource KanbanFocusSelectStyle}"
                                                          ItemsSource="{Binding CompactColumnsSource, RelativeSource={RelativeSource TemplatedParent}}"
                                                          SelectedItem="{Binding CompactSelectedColumn, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                                                          DisplayMemberPath="CompactTitle"
                                                          Variant="Bordered"
                                                          Size="Small"
                                                          HorizontalAlignment="Stretch"
                                                          Margin="0" />
                                    <ContentPresenter x:Name="PART_CompactColumnPresenter"
                                                      Grid.Row="1"
                                                      Content="{Binding CompactSelectedColumn, RelativeSource={RelativeSource TemplatedParent}}">
                                        <ContentPresenter.ContentTemplate>
                                            <DataTemplate>
                                                <kanban:FlowKanbanColumn x:Name="PART_KanbanColumn"
                                                                         ColumnData="{Binding}"
                                                                         IsCollapsed="{Binding IsCollapsed, Mode=TwoWay}"
                                                                         ParentKanban="{Binding Tag, ElementName=PART_BoardRoot}"
                                                                         AddCardPlacement="{Binding Tag.AddCardPlacement, ElementName=PART_BoardRoot}"
                                                                         Background="{ThemeResource DaisyBase200Brush}"
                                                                         CornerRadius="12"
                                                                         Padding="2"
                                                                         Margin="2"
                                                                         BorderBrush="{ThemeResource DaisyBase300Brush}"
                                                                         BorderThickness="1"
                                                                         MaxHeight="{Binding Tag.CompactColumnMaxHeight, ElementName=PART_BoardRoot}">
                                                    <Grid>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="Auto" />
                                                            <RowDefinition Height="Auto" />
                                                            <RowDefinition Height="*" />
                                                            <RowDefinition Height="Auto" />
                                                        </Grid.RowDefinitions>
                                                        <!-- Column Header -->
                                                        <Grid x:Name="PART_ColumnHeaderGrid"
                                                              Margin="0,0,0,8"
                                                              Background="Transparent"
                                                              Visibility="{Binding ShowColumnHeader, ElementName=PART_KanbanColumn, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="Auto" />
                                                            </Grid.RowDefinitions>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="Auto" />
                                                                <ColumnDefinition Width="*" />
                                                                <ColumnDefinition Width="Auto" />
                                                                <ColumnDefinition Width="Auto" />
                                                            </Grid.ColumnDefinitions>
                                                            <Border x:Name="PART_ColumnGrip"
                                                                    Grid.Row="0"
                                                                    Background="Transparent"
                                                                    Padding="4"
                                                                    CornerRadius="4"
                                                                    VerticalAlignment="Center"
                                                                    AutomationProperties.Name="{Binding DataContext[Kanban_Column_Reorder], ElementName=PART_BoardRoot}">
                                                                <controls:DaisyIconText IconData="{StaticResource DaisyIconNestedSquares}"
                                                                                        IconSize="12"
                                                                                        Foreground="{Binding ElementName=PART_ColumnTitle, Path=Foreground}" />
                                                            </Border>
                                                            <TextBlock x:Name="PART_ColumnTitle"
                                                                       Grid.Row="0"
                                                                       Grid.Column="1"
                                                                       Text="{Binding Title}"
                                                                       FontSize="18"
                                                                       Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                       FontWeight="Bold"
                                                                       TextTrimming="CharacterEllipsis"
                                                                       TextWrapping="NoWrap"
                                                                       VerticalAlignment="Center" />
                                                        <StackPanel x:Name="PART_ColumnHeaderIcons"
                                                                    Grid.Row="0"
                                                                    Grid.Column="1"
                                                                    Orientation="Horizontal"
                                                                    Spacing="8"
                                                                    HorizontalAlignment="Right">
                                                            <controls:DaisyBadge Variant="Neutral"
                                                                                 Size="Small"
                                                                                 Content="{Binding DataContext[Kanban_ArchiveColumn], ElementName=PART_BoardRoot}"
                                                                                 Visibility="{Binding IsArchiveColumn, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                                                 AutomationProperties.Name="{Binding DataContext[Kanban_ArchiveColumn], ElementName=PART_BoardRoot}">
                                                                <ToolTipService.ToolTip>
                                                                    <ToolTip Content="{Binding DataContext[Kanban_ArchiveColumn], ElementName=PART_BoardRoot}"
                                                                             IsEnabled="{Binding Tag.IsColumnTooltipsEnabled, ElementName=PART_BoardRoot}" />
                                                                </ToolTipService.ToolTip>
                                                            </controls:DaisyBadge>
                                                            <!-- Task Count Badge -->
                                                            <Border x:Name="PART_TaskCountBadge"
                                                                    Background="{ThemeResource DaisySecondaryBrush}"
                                                                    CornerRadius="10"
                                                                    Padding="6,2"
                                                                    VerticalAlignment="Center">
                                                                <TextBlock x:Name="PART_TaskCountText"
                                                                           Text="{Binding WipDisplay}"
                                                                           FontSize="11"
                                                                           FontWeight="SemiBold"
                                                                           Foreground="{ThemeResource DaisySecondaryContentBrush}" />
                                                            </Border>
                                                            <controls:DaisyIconText IconData="{StaticResource DaisyIconWarning}"
                                                                                    IconSize="12"
                                                                                    Foreground="{ThemeResource DaisyWarningBrush}"
                                                                                    VerticalAlignment="Center"
                                                                                    Visibility="{Binding IsWipExceeded, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                                <ToolTipService.ToolTip>
                                                                    <ToolTip Content="{Binding DataContext[Kanban_WipLimitExceeded], ElementName=PART_BoardRoot}"
                                                                             IsEnabled="{Binding Tag.IsColumnTooltipsEnabled, ElementName=PART_BoardRoot}" />
                                                                </ToolTipService.ToolTip>
                                                            </controls:DaisyIconText>
                                                            <controls:DaisyIconText IconData="{StaticResource DaisyIconInfo}"
                                                                                    IconSize="12"
                                                                                    Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                                    VerticalAlignment="Center"
                                                                                    Visibility="{Binding HasPolicy, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                                                    AutomationProperties.Name="{Binding DataContext[Kanban_Policy_Info], ElementName=PART_BoardRoot}">
                                                                <ToolTipService.ToolTip>
                                                                    <ToolTip Content="{Binding PolicyText}"
                                                                             IsEnabled="{Binding Tag.IsColumnTooltipsEnabled, ElementName=PART_BoardRoot}" />
                                                                </ToolTipService.ToolTip>
                                                            </controls:DaisyIconText>
                                                            <!-- Edit Title Button (shown on hover) -->
                                                            <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                                  x:Name="PART_RenameBtn"
                                                                                  Command="{Binding Tag.EditColumnCommand, ElementName=PART_BoardRoot}"
                                                                                  CommandParameter="{Binding}"
                                                                                  Variant="Ghost"
                                                                                  Shape="Square"
                                                                                  Size="ExtraSmall"
                                                                                  Opacity="0"
                                                                                  IsHitTestVisible="False"
                                                                                  controls:DaisyNeumorphic.IsEnabled="False"
                                                                                  VerticalAlignment="Center"
                                                                                  AutomationProperties.Name="{Binding DataContext[Kanban_RenameSection], ElementName=PART_BoardRoot}">
                                                                <ToolTipService.ToolTip>
                                                                    <ToolTip Content="{Binding DataContext[Kanban_RenameSection], ElementName=PART_BoardRoot}"
                                                                             IsEnabled="{Binding Tag.IsColumnTooltipsEnabled, ElementName=PART_BoardRoot}" />
                                                                </ToolTipService.ToolTip>
                                                                <controls:DaisyIconText IconData="{StaticResource DaisyIconPencil}"
                                                                                        IconSize="12" />
                                                            </controls:DaisyButton>
                                                        </StackPanel>
                                                        <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                              x:Name="PART_CollapseBtn"
                                                                              Grid.Row="0"
                                                                              Grid.Column="2"
                                                                              Visibility="{Binding Tag.IsCompactLayoutEnabled, ElementName=PART_BoardRoot, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Invert}"
                                                                              Command="{Binding Tag.ToggleColumnCollapseCommand, ElementName=PART_BoardRoot}"
                                                                              CommandParameter="{Binding}"
                                                                              Variant="Ghost"
                                                                              Shape="Square"
                                                                              Size="ExtraSmall"
                                                                              VerticalAlignment="Center"
                                                                              AutomationProperties.Name="{Binding DataContext[Kanban_Column_ToggleCollapse], ElementName=PART_BoardRoot}">
                                                            <ToolTipService.ToolTip>
                                                                <ToolTip Content="{Binding DataContext[Kanban_Column_ToggleCollapse], ElementName=PART_BoardRoot}"
                                                                         IsEnabled="{Binding Tag.IsColumnTooltipsEnabled, ElementName=PART_BoardRoot}" />
                                                            </ToolTipService.ToolTip>
                                                            <controls:DaisyIconText x:Name="PART_CollapseIcon"
                                                                                    IconData="{StaticResource DaisyIconChevronLeft}"
                                                                                    IconSize="12" />
                                                        </controls:DaisyButton>
                                                    </Grid>
                                                    <!-- Add Card (top) -->
                                                    <kanban:FlowKanbanAddCard x:Name="PART_AddCardTop"
                                                                              Grid.Row="1"
                                                                              ColumnData="{Binding}"
                                                                              LaneId="{Binding LaneFilterId, ElementName=PART_KanbanColumn}"
                                                                              InsertAtTop="True"
                                                                              AddCardText="{Binding DataContext[Kanban_AddCard], ElementName=PART_BoardRoot}"
                                                                              AddCardPlaceholderText="{Binding DataContext[Kanban_AddCardPlaceholder], ElementName=PART_BoardRoot}"
                                                                              AddCardConfirmText="{Binding DataContext[Common_Add], ElementName=PART_BoardRoot}"
                                                                              AddCardCancelText="{Binding DataContext[Common_Cancel], ElementName=PART_BoardRoot}"
                                                                              Margin="0,0,0,8"
                                                                              Visibility="{Binding ShowAddCardTop, ElementName=PART_KanbanColumn, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                                    <!-- Tasks (scrollable) -->
                                                    <Grid Grid.Row="2"
                                                          Margin="{Binding Padding, ElementName=PART_KanbanColumn, Converter={StaticResource KanbanTasksHostMarginConverter}}"
                                                          Visibility="{Binding ShowTasks, ElementName=PART_KanbanColumn, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                        <ListView x:Name="PART_TasksItemsControl"
                                                                  ItemsSource="{Binding TaskViews, ElementName=PART_KanbanColumn}"
                                                                  SelectionMode="None"
                                                                  IsItemClickEnabled="False"
                                                                  ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                                  ScrollViewer.VerticalScrollMode="Enabled"
                                                                  ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                                  ItemContainerStyle="{StaticResource KanbanTasksListViewItemContainerStyle}">
                                                            <ListView.ItemTemplate>
                                                                <DataTemplate>
                                                                    <StackPanel Spacing="4"
                                                                                HorizontalAlignment="Stretch">
                                                                        <TextBlock Text="{Binding Lane.Title}"
                                                                                   Style="{ThemeResource CaptionTextBlockStyle}"
                                                                                   Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                                   Visibility="{Binding ShowLaneHeader, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                                                        <kanban:FlowTaskCard Title="{Binding Task.Title}"
                                                                                             Task="{Binding Task}"
                                                                                             Palette="{Binding Task.Palette}"
                                                                                             CloseCommand="{Binding Tag.RemoveCardCommand, ElementName=PART_BoardRoot}"
                                                                                             CloseCommandParameter="{Binding Task}"
                                                                                             EditCommand="{Binding Tag.EditCardCommand, ElementName=PART_BoardRoot}"
                                                                                             Visibility="{Binding Task.IsSearchMatch, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                                                             HorizontalAlignment="Stretch">
                                                                            <TextBlock Text="{Binding Task.Description}"
                                                                                       TextWrapping="Wrap"
                                                                                       FontSize="12" />
                                                                        </kanban:FlowTaskCard>
                                                                    </StackPanel>
                                                                </DataTemplate>
                                                            </ListView.ItemTemplate>
                                                        </ListView>
                                                        <Canvas x:Name="PART_TaskDropIndicatorHost"
                                                                IsHitTestVisible="False" />
                                                    </Grid>
                                                    <!-- Add Card (bottom) -->
                                                    <kanban:FlowKanbanAddCard x:Name="PART_AddCardBottom"
                                                                              Grid.Row="3"
                                                                              ColumnData="{Binding}"
                                                                              LaneId="{Binding LaneFilterId, ElementName=PART_KanbanColumn}"
                                                                              AddCardText="{Binding DataContext[Kanban_AddCard], ElementName=PART_BoardRoot}"
                                                                              AddCardPlaceholderText="{Binding DataContext[Kanban_AddCardPlaceholder], ElementName=PART_BoardRoot}"
                                                                              AddCardConfirmText="{Binding DataContext[Common_Add], ElementName=PART_BoardRoot}"
                                                                              AddCardCancelText="{Binding DataContext[Common_Cancel], ElementName=PART_BoardRoot}"
                                                                              Margin="0,8,0,0"
                                                                              Visibility="{Binding ShowAddCardBottom, ElementName=PART_KanbanColumn, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                                </Grid>
                                            </kanban:FlowKanbanColumn>
                                        </DataTemplate>
                                    </ContentPresenter.ContentTemplate>
                                </ContentPresenter>
                            </Grid>
                        </Border>
                            <!-- Swimlane Board -->
                            <ScrollViewer HorizontalScrollBarVisibility="Auto"
                                          VerticalScrollBarVisibility="Auto"
                                          Visibility="{Binding IsSwimlaneLayoutVisible, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                                <StackPanel Padding="16"
                                            Spacing="12">
                                    <!-- Column Headers -->
                                    <Grid ColumnSpacing="12">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="140" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <Border Grid.Column="0"
                                                Background="Transparent" />
                                        <Grid Grid.Column="1">
                                            <controls:DaisyResizableColumnsHost x:Name="PART_SwimlaneColumnsItemsControl"
                                                                                ItemsSource="{Binding SwimlaneColumnsSource, RelativeSource={RelativeSource TemplatedParent}}"
                                                                                ColumnSpacing="8"
                                                                                ColumnWidth="{Binding Tag.ColumnWidth, ElementName=PART_BoardRoot, Mode=TwoWay}"
                                                                                MinColumnWidth="{Binding Tag.MinColumnWidth, ElementName=PART_BoardRoot}"
                                                                                MaxColumnWidth="{Binding Tag.MaxColumnWidth, ElementName=PART_BoardRoot}"
                                                                                IsGripEnabled="{Binding Tag.IsColumnResizeEnabled, ElementName=PART_BoardRoot}"
                                                                                AccessibleText="{Binding DataContext[Kanban_Column_ResizeGrip], ElementName=PART_BoardRoot}">
                                                <ItemsControl.ItemContainerStyle>
                                                    <Style TargetType="ContentPresenter">
                                                        <Setter Property="Visibility"
                                                                Value="{Binding IsArchiveColumnVisible, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                                    </Style>
                                                </ItemsControl.ItemContainerStyle>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <kanban:FlowKanbanColumn x:Name="PART_KanbanColumn"
                                                                                 ColumnData="{Binding}"
                                                                                 IsCollapsed="{Binding IsCollapsed, Mode=TwoWay}"
                                                                                 ParentKanban="{Binding Tag, ElementName=PART_BoardRoot}"
                                                                                 AddCardPlacement="{Binding Tag.AddCardPlacement, ElementName=PART_BoardRoot}"
                                                                                 Background="{ThemeResource DaisyBase200Brush}"
                                                                                 CornerRadius="12"
                                                                                 Padding="2"
                                                                                 Margin="2"
                                                                                 BorderBrush="{ThemeResource DaisyBase300Brush}"
                                                                                 BorderThickness="1"
                                                                                 ShowColumnHeader="True"
                                                                                 ShowTasks="False"
                                                                                 ShowAddCard="False"
                                                                                 IsDropEnabled="False"
                                                                                 Visibility="{Binding IsArchiveColumnVisible, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto" />
                                                                    <RowDefinition Height="Auto" />
                                                                    <RowDefinition Height="*" />
                                                                    <RowDefinition Height="Auto" />
                                                                </Grid.RowDefinitions>
                                                                <!-- Column Header -->
                                                                <Grid Grid.Row="0"
                                                                      Visibility="{Binding ShowColumnHeader, ElementName=PART_KanbanColumn, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                                    <Grid x:Name="PART_ColumnHeaderGrid"
                                                                          Margin="0,0,0,8"
                                                                          Background="Transparent"
                                                                          Visibility="{Binding IsCollapsed, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Invert}">
                                                                        <Grid.RowDefinitions>
                                                                            <RowDefinition Height="Auto" />
                                                                            <RowDefinition Height="Auto" />
                                                                        </Grid.RowDefinitions>
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="Auto" />
                                                                            <ColumnDefinition Width="*" />
                                                                            <ColumnDefinition Width="Auto" />
                                                                            <ColumnDefinition Width="Auto" />
                                                                        </Grid.ColumnDefinitions>
                                                                        <Border x:Name="PART_ColumnGrip"
                                                                                Grid.Row="0"
                                                                                Background="Transparent"
                                                                                Padding="4"
                                                                                CornerRadius="4"
                                                                                VerticalAlignment="Center"
                                                                                AutomationProperties.Name="{Binding DataContext[Kanban_Column_Reorder], ElementName=PART_BoardRoot}">
                                                                            <controls:DaisyIconText IconData="{StaticResource DaisyIconNestedSquares}"
                                                                                                    IconSize="12"
                                                                                                    Foreground="{Binding ElementName=PART_ColumnTitle, Path=Foreground}" />
                                                                        </Border>
                                                                        <TextBlock x:Name="PART_ColumnTitle"
                                                                                   Grid.Row="0"
                                                                                   Grid.Column="1"
                                                                                   Text="{Binding DisplayTitle}"
                                                                                   FontSize="18"
                                                                                   Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                                   FontWeight="Bold"
                                                                                   TextTrimming="CharacterEllipsis"
                                                                                   TextWrapping="NoWrap"
                                                                                   VerticalAlignment="Center" />
                                                                        <StackPanel x:Name="PART_ColumnHeaderIcons"
                                                                                    Grid.Row="0"
                                                                                    Grid.Column="1"
                                                                                    Orientation="Horizontal"
                                                                                    Spacing="8"
                                                                                    HorizontalAlignment="Right">
                                                                            <controls:DaisyBadge Variant="Neutral"
                                                                                                 Size="Small"
                                                                                                 Content="{Binding DataContext[Kanban_ArchiveColumn], ElementName=PART_BoardRoot}"
                                                                                                 Visibility="{Binding IsArchiveColumn, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                                                                 AutomationProperties.Name="{Binding DataContext[Kanban_ArchiveColumn], ElementName=PART_BoardRoot}">
                                                                                <ToolTipService.ToolTip>
                                                                                    <ToolTip Content="{Binding DataContext[Kanban_ArchiveColumn], ElementName=PART_BoardRoot}"
                                                                                             IsEnabled="{Binding Tag.IsColumnTooltipsEnabled, ElementName=PART_BoardRoot}" />
                                                                                </ToolTipService.ToolTip>
                                                                            </controls:DaisyBadge>
                                                                            <!-- Task Count Badge -->
                                                                            <Border x:Name="PART_TaskCountBadge"
                                                                                    Background="{ThemeResource DaisySecondaryBrush}"
                                                                                    CornerRadius="10"
                                                                                    Padding="6,2"
                                                                                    VerticalAlignment="Center">
                                                                                <TextBlock x:Name="PART_TaskCountText"
                                                                                           Text="{Binding WipDisplay}"
                                                                                           FontSize="11"
                                                                                           FontWeight="SemiBold"
                                                                                           Foreground="{ThemeResource DaisySecondaryContentBrush}" />
                                                                            </Border>
                                                                            <controls:DaisyIconText IconData="{StaticResource DaisyIconWarning}"
                                                                                                    IconSize="12"
                                                                                                    Foreground="{ThemeResource DaisyWarningBrush}"
                                                                                                    VerticalAlignment="Center"
                                                                                                    Visibility="{Binding IsWipExceeded, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                                                <ToolTipService.ToolTip>
                                                                                    <ToolTip Content="{Binding DataContext[Kanban_WipLimitExceeded], ElementName=PART_BoardRoot}"
                                                                                             IsEnabled="{Binding Tag.IsColumnTooltipsEnabled, ElementName=PART_BoardRoot}" />
                                                                                </ToolTipService.ToolTip>
                                                                            </controls:DaisyIconText>
                                                                            <!-- Edit Title Button (shown on hover) -->
                                                                            <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                                                  x:Name="PART_RenameBtn"
                                                                                                  Command="{Binding Tag.EditColumnCommand, ElementName=PART_BoardRoot}"
                                                                                                  CommandParameter="{Binding}"
                                                                                                  Variant="Ghost"
                                                                                                  Shape="Square"
                                                                                                  Size="ExtraSmall"
                                                                                                  Opacity="0"
                                                                                                  IsHitTestVisible="False"
                                                                                                  controls:DaisyNeumorphic.IsEnabled="False"
                                                                                                  VerticalAlignment="Center"
                                                                                                  AutomationProperties.Name="{Binding DataContext[Kanban_RenameSection], ElementName=PART_BoardRoot}">
                                                                                <ToolTipService.ToolTip>
                                                                                    <ToolTip Content="{Binding DataContext[Kanban_RenameSection], ElementName=PART_BoardRoot}"
                                                                                             IsEnabled="{Binding Tag.IsColumnTooltipsEnabled, ElementName=PART_BoardRoot}" />
                                                                                </ToolTipService.ToolTip>
                                                                                <controls:DaisyIconText IconData="{StaticResource DaisyIconPencil}"
                                                                                                        IconSize="12" />
                                                                            </controls:DaisyButton>
                                                                        </StackPanel>
                                                                        <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                                              x:Name="PART_CollapseBtn"
                                                                                              Grid.Row="0"
                                                                                              Grid.Column="2"
                                                                                              Visibility="{Binding Tag.IsCompactLayoutEnabled, ElementName=PART_BoardRoot, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Invert}"
                                                                                              Command="{Binding Tag.ToggleColumnCollapseCommand, ElementName=PART_BoardRoot}"
                                                                                              CommandParameter="{Binding}"
                                                                                              Variant="Ghost"
                                                                                              Shape="Square"
                                                                                              Size="ExtraSmall"
                                                                                              VerticalAlignment="Center"
                                                                                              AutomationProperties.Name="{Binding DataContext[Kanban_Column_ToggleCollapse], ElementName=PART_BoardRoot}">
                                                                            <ToolTipService.ToolTip>
                                                                                <ToolTip Content="{Binding DataContext[Kanban_Column_ToggleCollapse], ElementName=PART_BoardRoot}"
                                                                                         IsEnabled="{Binding Tag.IsColumnTooltipsEnabled, ElementName=PART_BoardRoot}" />
                                                                            </ToolTipService.ToolTip>
                                                                            <controls:DaisyIconText x:Name="PART_CollapseIcon"
                                                                                                    IconData="{StaticResource DaisyIconChevronLeft}"
                                                                                                    IconSize="12" />
                                                                        </controls:DaisyButton>
                                                                    </Grid>

                                                                    <StackPanel x:Name="PART_CollapsedHeader"
                                                                                Visibility="{Binding IsCollapsed, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                                                Margin="0,0,0,8"
                                                                                HorizontalAlignment="Center"
                                                                                VerticalAlignment="Top"
                                                                                Spacing="4">
                                                                        <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                                              x:Name="PART_CollapsedExpandBtn"
                                                                                              Variant="Ghost"
                                                                                              Shape="Square"
                                                                                              Size="ExtraSmall"
                                                                                              Visibility="{Binding Tag.IsCompactLayoutEnabled, ElementName=PART_BoardRoot, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Invert}"
                                                                                              Command="{Binding Tag.ToggleColumnCollapseCommand, ElementName=PART_BoardRoot}"
                                                                                              CommandParameter="{Binding}"
                                                                                              AutomationProperties.Name="{Binding DataContext[Kanban_Column_ToggleCollapse], ElementName=PART_BoardRoot}">
                                                                            <controls:DaisyIconText IconData="{StaticResource DaisyIconChevronRight}"
                                                                                                    IconSize="12" />
                                                                        </controls:DaisyButton>
                                                                        <TextBlock x:Name="PART_CollapsedTitle"
                                                                                   Text="{Binding DisplayTitle}"
                                                                                   FontSize="18"
                                                                                   Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                                   FontWeight="Bold"
                                                                                   TextWrapping="Wrap"
                                                                                   TextTrimming="None"
                                                                                   TextAlignment="Center"
                                                                                   HorizontalAlignment="Center" />
                                                                    </StackPanel>
                                                                </Grid>
                                                                <!-- Add Card (top) -->
                                                                <kanban:FlowKanbanAddCard x:Name="PART_AddCardTop"
                                                                                          Grid.Row="1"
                                                                                          ColumnData="{Binding}"
                                                                                          LaneId="{Binding LaneFilterId, ElementName=PART_KanbanColumn}"
                                                                                          InsertAtTop="True"
                                                                                          AddCardText="{Binding DataContext[Kanban_AddCard], ElementName=PART_BoardRoot}"
                                                                                          AddCardPlaceholderText="{Binding DataContext[Kanban_AddCardPlaceholder], ElementName=PART_BoardRoot}"
                                                                                          AddCardConfirmText="{Binding DataContext[Common_Add], ElementName=PART_BoardRoot}"
                                                                                          AddCardCancelText="{Binding DataContext[Common_Cancel], ElementName=PART_BoardRoot}"
                                                                                          Margin="0,0,0,8"
                                                                                          Visibility="{Binding ShowAddCardTop, ElementName=PART_KanbanColumn, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                                                <!-- Tasks (scrollable) -->
                                                                <Grid Grid.Row="2"
                                                                      Margin="{Binding Padding, ElementName=PART_KanbanColumn, Converter={StaticResource KanbanTasksHostMarginConverter}}"
                                                                      Visibility="{Binding ShowTasks, ElementName=PART_KanbanColumn, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                                    <ListView x:Name="PART_TasksItemsControl"
                                                                              ItemsSource="{Binding TaskViews, ElementName=PART_KanbanColumn}"
                                                                              SelectionMode="None"
                                                                              IsItemClickEnabled="False"
                                                                              ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                                              ScrollViewer.VerticalScrollMode="Enabled"
                                                                              ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                                              ItemContainerStyle="{StaticResource KanbanTasksListViewItemContainerStyle}">
                                                                        <ListView.ItemTemplate>
                                                                            <DataTemplate>
                                                                                <StackPanel Spacing="4"
                                                                                            HorizontalAlignment="Stretch">
                                                                                    <TextBlock Text="{Binding Lane.Title}"
                                                                                               Style="{ThemeResource CaptionTextBlockStyle}"
                                                                                               Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                                               Visibility="{Binding ShowLaneHeader, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                                                                    <kanban:FlowTaskCard Title="{Binding Task.Title}"
                                                                                                         Task="{Binding Task}"
                                                                                                         Palette="{Binding Task.Palette}"
                                                                                                         CloseCommand="{Binding Tag.RemoveCardCommand, ElementName=PART_BoardRoot}"
                                                                                                         CloseCommandParameter="{Binding Task}"
                                                                                                         EditCommand="{Binding Tag.EditCardCommand, ElementName=PART_BoardRoot}"
                                                                                                         Visibility="{Binding Task.IsSearchMatch, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                                                                         HorizontalAlignment="Stretch">
                                                                                        <TextBlock Text="{Binding Task.Description}"
                                                                                                   TextWrapping="Wrap"
                                                                                                   FontSize="12" />
                                                                                    </kanban:FlowTaskCard>
                                                                                </StackPanel>
                                                                            </DataTemplate>
                                                                        </ListView.ItemTemplate>
                                                                    </ListView>
                                                                    <Canvas x:Name="PART_TaskDropIndicatorHost"
                                                                            IsHitTestVisible="False" />
                                                                </Grid>
                                                                <!-- Add Card (bottom) -->
                                                                <kanban:FlowKanbanAddCard x:Name="PART_AddCardBottom"
                                                                                          Grid.Row="3"
                                                                                          ColumnData="{Binding}"
                                                                                          LaneId="{Binding LaneFilterId, ElementName=PART_KanbanColumn}"
                                                                                          AddCardText="{Binding DataContext[Kanban_AddCard], ElementName=PART_BoardRoot}"
                                                                                          AddCardPlaceholderText="{Binding DataContext[Kanban_AddCardPlaceholder], ElementName=PART_BoardRoot}"
                                                                                          AddCardConfirmText="{Binding DataContext[Common_Add], ElementName=PART_BoardRoot}"
                                                                                          AddCardCancelText="{Binding DataContext[Common_Cancel], ElementName=PART_BoardRoot}"
                                                                                          Margin="0,8,0,0"
                                                                                          Visibility="{Binding ShowAddCardBottom, ElementName=PART_KanbanColumn, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                                            </Grid>
                                                        </kanban:FlowKanbanColumn>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </controls:DaisyResizableColumnsHost>
                                            <Canvas x:Name="PART_SwimlaneColumnDropLayer"
                                                    IsHitTestVisible="False" />
                                        </Grid>
                                    </Grid>
                                    <!-- Lane Rows -->
                                    <ItemsControl ItemsSource="{Binding LaneRows, RelativeSource={RelativeSource TemplatedParent}}">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel Orientation="Vertical"
                                                            Spacing="12" />
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Grid x:Name="PART_LaneRow"
                                                      ColumnSpacing="12">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="140" />
                                                        <ColumnDefinition Width="*" />
                                                    </Grid.ColumnDefinitions>
                                                    <Border x:Name="PART_LaneHeaderBorder"
                                                            Grid.Column="0"
                                                            Background="{ThemeResource DaisyBase200Brush}"
                                                            BorderBrush="{ThemeResource DaisyBase300Brush}"
                                                            BorderThickness="1"
                                                            CornerRadius="12"
                                                            Padding="12"
                                                            Margin="4">
                                                        <TextBlock x:Name="PART_LaneHeaderText"
                                                                   Text="{Binding Lane.Title}"
                                                                   Style="{ThemeResource CaptionTextBlockStyle}"
                                                                   Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                   Opacity="0.85"
                                                                   TextWrapping="Wrap" />
                                                    </Border>
                                                    <ItemsControl Grid.Column="1"
                                                                  ItemsSource="{Binding Cells}">
                                                        <ItemsControl.ItemsPanel>
                                                            <ItemsPanelTemplate>
                                                                <StackPanel Orientation="Horizontal"
                                                                            Spacing="8" />
                                                            </ItemsPanelTemplate>
                                                        </ItemsControl.ItemsPanel>
                                                        <ItemsControl.ItemContainerStyle>
                                                            <Style TargetType="ContentPresenter">
                                                                <Setter Property="Visibility"
                                                                        Value="{Binding Column.IsArchiveColumnVisible, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                                            </Style>
                                                        </ItemsControl.ItemContainerStyle>
                                                        <ItemsControl.ItemTemplate>
                                                            <DataTemplate>
                                                                <kanban:FlowKanbanColumn x:Name="PART_KanbanColumn"
                                                                                         ColumnData="{Binding Column}"
                                                                                         IsCollapsed="{Binding Column.IsCollapsed, Mode=TwoWay}"
                                                                                         ParentKanban="{Binding Tag, ElementName=PART_BoardRoot}"
                                                                                         AddCardPlacement="{Binding Tag.AddCardPlacement, ElementName=PART_BoardRoot}"
                                                                                         LaneFilterId="{Binding LaneId}"
                                                                                         Tag="{Binding}"
                                                                                         ShowColumnHeader="False"
                                                                                         ShowTasks="True"
                                                                                         ShowAddCard="True"
                                                                                         IsDropEnabled="True"
                                                                                         Background="{ThemeResource DaisyBase200Brush}"
                                                                                         CornerRadius="12"
                                                                                         Padding="2"
                                                                                         Margin="2"
                                                                                         BorderBrush="{ThemeResource DaisyBase300Brush}"
                                                                                         BorderThickness="1"
                                                                                         Visibility="{Binding Column.IsArchiveColumnVisible, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                                    <Grid DataContext="{Binding Column}">
                                                                        <Grid.RowDefinitions>
                                                                            <RowDefinition Height="Auto" />
                                                                            <RowDefinition Height="Auto" />
                                                                            <RowDefinition Height="*" />
                                                                            <RowDefinition Height="Auto" />
                                                                        </Grid.RowDefinitions>
                                                                        <!-- Lane WIP Badge -->
                                                                        <StackPanel Grid.Row="0"
                                                                                    Orientation="Horizontal"
                                                                                    HorizontalAlignment="Right"
                                                                                    Spacing="6"
                                                                                    Visibility="{Binding Tag.HasLaneWipLimit, ElementName=PART_KanbanColumn, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                                            <Border Background="{ThemeResource DaisySecondaryBrush}"
                                                                                    CornerRadius="10"
                                                                                    Padding="6,2"
                                                                                    VerticalAlignment="Center">
                                                                                <TextBlock Text="{Binding Tag.LaneWipDisplay, ElementName=PART_KanbanColumn}"
                                                                                           FontSize="11"
                                                                                           FontWeight="SemiBold"
                                                                                           Foreground="{ThemeResource DaisySecondaryContentBrush}" />
                                                                            </Border>
                                                                            <controls:DaisyIconText IconData="{StaticResource DaisyIconWarning}"
                                                                                                    IconSize="12"
                                                                                                    Foreground="{ThemeResource DaisyWarningBrush}"
                                                                                                    VerticalAlignment="Center"
                                                                                                    Visibility="{Binding Tag.IsLaneWipExceeded, ElementName=PART_KanbanColumn, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                                                <ToolTipService.ToolTip>
                                                                                    <ToolTip Content="{Binding DataContext[Kanban_LaneWipLimitExceeded], ElementName=PART_BoardRoot}"
                                                                                             IsEnabled="{Binding Tag.IsColumnTooltipsEnabled, ElementName=PART_BoardRoot}" />
                                                                                </ToolTipService.ToolTip>
                                                                            </controls:DaisyIconText>
                                                                        </StackPanel>
                                                                        <!-- Column Header -->
                                                                        <Grid x:Name="PART_ColumnHeaderGrid"
                                                                              Margin="0,0,0,8"
                                                                              Background="Transparent"
                                                                              Visibility="{Binding ShowColumnHeader, ElementName=PART_KanbanColumn, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                                            <Grid.RowDefinitions>
                                                                                <RowDefinition Height="Auto" />
                                                                                <RowDefinition Height="Auto" />
                                                                            </Grid.RowDefinitions>
                                                                            <Grid.ColumnDefinitions>
                                                                                <ColumnDefinition Width="Auto" />
                                                                                <ColumnDefinition Width="*" />
                                                                                <ColumnDefinition Width="Auto" />
                                                                                <ColumnDefinition Width="Auto" />
                                                                            </Grid.ColumnDefinitions>
                                                                            <Border x:Name="PART_ColumnGrip"
                                                                                    Grid.Row="0"
                                                                                    Background="Transparent"
                                                                                    Padding="4"
                                                                                    CornerRadius="4"
                                                                                    VerticalAlignment="Center"
                                                                                    AutomationProperties.Name="{Binding DataContext[Kanban_Column_Reorder], ElementName=PART_BoardRoot}">
                                                                                <controls:DaisyIconText IconData="{StaticResource DaisyIconNestedSquares}"
                                                                                                        IconSize="12"
                                                                                                        Foreground="{Binding ElementName=PART_ColumnTitle, Path=Foreground}" />
                                                                            </Border>
                                                                            <TextBlock x:Name="PART_ColumnTitle"
                                                                                       Grid.Row="0"
                                                                                       Grid.Column="1"
                                                                                       Text="{Binding Title}"
                                                                                       FontSize="18"
                                                                                       Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                                       FontWeight="Bold"
                                                                                       TextTrimming="CharacterEllipsis"
                                                                                       TextWrapping="NoWrap"
                                                                                       VerticalAlignment="Center" />
                                                                            <StackPanel x:Name="PART_ColumnHeaderIcons"
                                                                                        Grid.Row="0"
                                                                                        Grid.Column="1"
                                                                                        Orientation="Horizontal"
                                                                                        Spacing="8"
                                                                                        HorizontalAlignment="Right">
                                                                                <controls:DaisyBadge Variant="Neutral"
                                                                                                     Size="Small"
                                                                                                     Content="{Binding DataContext[Kanban_ArchiveColumn], ElementName=PART_BoardRoot}"
                                                                                                     Visibility="{Binding IsArchiveColumn, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                                                                     AutomationProperties.Name="{Binding DataContext[Kanban_ArchiveColumn], ElementName=PART_BoardRoot}">
                                                                                    <ToolTipService.ToolTip>
                                                                                        <ToolTip Content="{Binding DataContext[Kanban_ArchiveColumn], ElementName=PART_BoardRoot}"
                                                                                                 IsEnabled="{Binding Tag.IsColumnTooltipsEnabled, ElementName=PART_BoardRoot}" />
                                                                                    </ToolTipService.ToolTip>
                                                                                </controls:DaisyBadge>
                                                                                <!-- Task Count Badge -->
                                                                                <Border x:Name="PART_TaskCountBadge"
                                                                                        Background="{ThemeResource DaisySecondaryBrush}"
                                                                                        CornerRadius="10"
                                                                                        Padding="6,2"
                                                                                        VerticalAlignment="Center">
                                                                                    <TextBlock x:Name="PART_TaskCountText"
                                                                                               Text="{Binding WipDisplay}"
                                                                                               FontSize="11"
                                                                                               FontWeight="SemiBold"
                                                                                               Foreground="{ThemeResource DaisySecondaryContentBrush}" />
                                                                                </Border>
                                                                                <controls:DaisyIconText IconData="{StaticResource DaisyIconWarning}"
                                                                                                        IconSize="12"
                                                                                                        Foreground="{ThemeResource DaisyWarningBrush}"
                                                                                                        VerticalAlignment="Center"
                                                                                                        Visibility="{Binding IsWipExceeded, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                                                    <ToolTipService.ToolTip>
                                                                                        <ToolTip Content="{Binding DataContext[Kanban_WipLimitExceeded], ElementName=PART_BoardRoot}"
                                                                                                 IsEnabled="{Binding Tag.IsColumnTooltipsEnabled, ElementName=PART_BoardRoot}" />
                                                                                    </ToolTipService.ToolTip>
                                                                                </controls:DaisyIconText>
                                                                                <controls:DaisyIconText IconData="{StaticResource DaisyIconInfo}"
                                                                                                        IconSize="12"
                                                                                                        Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                                                        VerticalAlignment="Center"
                                                                                                        Visibility="{Binding HasPolicy, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                                                                        AutomationProperties.Name="{Binding DataContext[Kanban_Policy_Info], ElementName=PART_BoardRoot}">
                                                                                    <ToolTipService.ToolTip>
                                                                                        <ToolTip Content="{Binding PolicyText}"
                                                                                                 IsEnabled="{Binding Tag.IsColumnTooltipsEnabled, ElementName=PART_BoardRoot}" />
                                                                                    </ToolTipService.ToolTip>
                                                                                </controls:DaisyIconText>
                                                                                <!-- Edit Title Button (shown on hover) -->
                                                                                <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                                                      x:Name="PART_RenameBtn"
                                                                                                      Command="{Binding Tag.EditColumnCommand, ElementName=PART_BoardRoot}"
                                                                                                      CommandParameter="{Binding}"
                                                                                                      Variant="Ghost"
                                                                                                      Shape="Square"
                                                                                                      Size="ExtraSmall"
                                                                                                      Opacity="0"
                                                                                                      IsHitTestVisible="False"
                                                                                                      controls:DaisyNeumorphic.IsEnabled="False"
                                                                                                      VerticalAlignment="Center"
                                                                                                      AutomationProperties.Name="{Binding DataContext[Kanban_RenameSection], ElementName=PART_BoardRoot}">
                                                                                    <ToolTipService.ToolTip>
                                                                                        <ToolTip Content="{Binding DataContext[Kanban_RenameSection], ElementName=PART_BoardRoot}"
                                                                                                 IsEnabled="{Binding Tag.IsColumnTooltipsEnabled, ElementName=PART_BoardRoot}" />
                                                                                    </ToolTipService.ToolTip>
                                                                                    <controls:DaisyIconText IconData="{StaticResource DaisyIconPencil}"
                                                                                                            IconSize="12" />
                                                                                </controls:DaisyButton>
                                                                            </StackPanel>
                                                                            <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                                                  x:Name="PART_CollapseBtn"
                                                                                                  Grid.Row="0"
                                                                                                  Grid.Column="2"
                                                                                                  Visibility="{Binding Tag.IsCompactLayoutEnabled, ElementName=PART_BoardRoot, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=Invert}"
                                                                                                  Command="{Binding Tag.ToggleColumnCollapseCommand, ElementName=PART_BoardRoot}"
                                                                                                  CommandParameter="{Binding}"
                                                                                                  Variant="Ghost"
                                                                                                  Shape="Square"
                                                                                                  Size="ExtraSmall"
                                                                                                  VerticalAlignment="Center"
                                                                                                  AutomationProperties.Name="{Binding DataContext[Kanban_Column_ToggleCollapse], ElementName=PART_BoardRoot}">
                                                                                <ToolTipService.ToolTip>
                                                                                    <ToolTip Content="{Binding DataContext[Kanban_Column_ToggleCollapse], ElementName=PART_BoardRoot}"
                                                                                             IsEnabled="{Binding Tag.IsColumnTooltipsEnabled, ElementName=PART_BoardRoot}" />
                                                                                </ToolTipService.ToolTip>
                                                                                <controls:DaisyIconText x:Name="PART_CollapseIcon"
                                                                                                        IconData="{StaticResource DaisyIconChevronLeft}"
                                                                                                        IconSize="12" />
                                                                            </controls:DaisyButton>
                                                                        </Grid>
                                                                        <!-- Add Card (top) -->
                                                                        <kanban:FlowKanbanAddCard x:Name="PART_AddCardTop"
                                                                                                  Grid.Row="1"
                                                                                                  ColumnData="{Binding}"
                                                                                                  LaneId="{Binding LaneFilterId, ElementName=PART_KanbanColumn}"
                                                                                                  InsertAtTop="True"
                                                                                                  AddCardText="{Binding DataContext[Kanban_AddCard], ElementName=PART_BoardRoot}"
                                                                                                  AddCardPlaceholderText="{Binding DataContext[Kanban_AddCardPlaceholder], ElementName=PART_BoardRoot}"
                                                                                                  AddCardConfirmText="{Binding DataContext[Common_Add], ElementName=PART_BoardRoot}"
                                                                                                  AddCardCancelText="{Binding DataContext[Common_Cancel], ElementName=PART_BoardRoot}"
                                                                                                  Margin="0,0,0,8"
                                                                                                  Visibility="{Binding ShowAddCardTop, ElementName=PART_KanbanColumn, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                                                        <!-- Tasks (scrollable) -->
                                                                        <Grid Grid.Row="2"
                                                                              Margin="{Binding Padding, ElementName=PART_KanbanColumn, Converter={StaticResource KanbanTasksHostMarginConverter}}"
                                                                              Visibility="{Binding ShowTasks, ElementName=PART_KanbanColumn, Converter={StaticResource BooleanToVisibilityConverter}}">
                                                                            <ListView x:Name="PART_TasksItemsControl"
                                                                                      ItemsSource="{Binding TaskViews, ElementName=PART_KanbanColumn}"
                                                                                      SelectionMode="None"
                                                                                      IsItemClickEnabled="False"
                                                                                      ScrollViewer.VerticalScrollBarVisibility="Auto"
                                                                                      ScrollViewer.VerticalScrollMode="Enabled"
                                                                                      ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                                                                      ItemContainerStyle="{StaticResource KanbanTasksListViewItemContainerStyle}">
                                                                                <ListView.ItemTemplate>
                                                                                    <DataTemplate>
                                                                                        <StackPanel Spacing="4"
                                                                                                    HorizontalAlignment="Stretch">
                                                                                            <TextBlock Text="{Binding Lane.Title}"
                                                                                                       Style="{ThemeResource CaptionTextBlockStyle}"
                                                                                                       Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                                                                       Visibility="{Binding ShowLaneHeader, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                                                                            <kanban:FlowTaskCard Title="{Binding Task.Title}"
                                                                                                                 Task="{Binding Task}"
                                                                                                                 Palette="{Binding Task.Palette}"
                                                                                                                 CloseCommand="{Binding Tag.RemoveCardCommand, ElementName=PART_BoardRoot}"
                                                                                                                 CloseCommandParameter="{Binding Task}"
                                                                                                                 EditCommand="{Binding Tag.EditCardCommand, ElementName=PART_BoardRoot}"
                                                                                                                 Visibility="{Binding Task.IsSearchMatch, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                                                                                 HorizontalAlignment="Stretch">
                                                                                                <TextBlock Text="{Binding Task.Description}"
                                                                                                           TextWrapping="Wrap"
                                                                                                           FontSize="12" />
                                                                                            </kanban:FlowTaskCard>
                                                                                        </StackPanel>
                                                                                    </DataTemplate>
                                                                                </ListView.ItemTemplate>
                                                                            </ListView>
                                                                            <Canvas x:Name="PART_TaskDropIndicatorHost"
                                                                                    IsHitTestVisible="False" />
                                                                        </Grid>
                                                                        <!-- Add Card (bottom) -->
                                                                        <kanban:FlowKanbanAddCard x:Name="PART_AddCardBottom"
                                                                                                  Grid.Row="3"
                                                                                                  ColumnData="{Binding}"
                                                                                                  LaneId="{Binding LaneFilterId, ElementName=PART_KanbanColumn}"
                                                                                                  AddCardText="{Binding DataContext[Kanban_AddCard], ElementName=PART_BoardRoot}"
                                                                                                  AddCardPlaceholderText="{Binding DataContext[Kanban_AddCardPlaceholder], ElementName=PART_BoardRoot}"
                                                                                                  AddCardConfirmText="{Binding DataContext[Common_Add], ElementName=PART_BoardRoot}"
                                                                                                  AddCardCancelText="{Binding DataContext[Common_Cancel], ElementName=PART_BoardRoot}"
                                                                                                  Margin="0,8,0,0"
                                                                                                  Visibility="{Binding ShowAddCardBottom, ElementName=PART_KanbanColumn, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                                                    </Grid>
                                                                </kanban:FlowKanbanColumn>
                                                            </DataTemplate>
                                                        </ItemsControl.ItemTemplate>
                                                    </ItemsControl>
                                                </Grid>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </StackPanel>
                            </ScrollViewer>
                        </Grid>
                        <!-- Sidebar -->
                        <Border x:Name="PART_SidebarBorder"
                                Grid.Row="0"
                                Grid.RowSpan="3"
                                Grid.Column="1"
                                Background="{ThemeResource DaisyBase100Brush}"
                                BorderBrush="{ThemeResource DaisyBase300Brush}"
                                BorderThickness="1,0,0,0"
                                Padding="12"
                                Width="56">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <!-- Action Buttons -->
                                <StackPanel Spacing="12"
                                            HorizontalAlignment="Center">
                                    <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                          Command="{TemplateBinding ShowHomeCommand}"
                                                          AutomationProperties.Name="{Binding [Kanban_Home]}"
                                                          Variant="Neutral"
                                                          Shape="Square"
                                                          Size="Small">
                                        <ToolTipService.ToolTip>
                                            <ToolTip Content="{Binding [Kanban_Home]}" />
                                        </ToolTipService.ToolTip>
                                        <controls:DaisyIconText IconData="{StaticResource DaisyIconHome}"
                                                                IconSize="14" />
                                    </controls:DaisyButton>
                                    <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                          Command="{TemplateBinding ShowUserManagementCommand}"
                                                          AutomationProperties.Name="{Binding [Kanban_Users_Title]}"
                                                          Variant="Neutral"
                                                          Shape="Square"
                                                          Size="Small"
                                                          Visibility="{Binding IsUserManagementButtonVisible, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                                        <ToolTipService.ToolTip>
                                            <ToolTip Content="{Binding [Kanban_Users_Title]}" />
                                        </ToolTipService.ToolTip>
                                        <controls:DaisyIconText IconData="{StaticResource DaisyIconUser}"
                                                                IconSize="14" />
                                    </controls:DaisyButton>
                                    <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                          Command="{TemplateBinding SettingsCommand}"
                                                          AutomationProperties.Name="{Binding [Kanban_Settings_Title]}"
                                                          Variant="Neutral"
                                                          Shape="Square"
                                                          Size="Small">
                                        <ToolTipService.ToolTip>
                                            <ToolTip Content="{Binding [Kanban_Settings_Title]}" />
                                        </ToolTipService.ToolTip>
                                        <controls:DaisyIconText IconData="{StaticResource DaisyIconSettings}"
                                                                IconSize="14" />
                                    </controls:DaisyButton>
                                    <StackPanel Spacing="12"
                                                Visibility="{Binding IsBoardViewActive, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                                        <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                              Command="{TemplateBinding UndoCommand}"
                                                              IsEnabled="{Binding CommandHistory.CanUndo, RelativeSource={RelativeSource TemplatedParent}}"
                                                              AutomationProperties.Name="{Binding [Kanban_Undo]}"
                                                              Variant="Neutral"
                                                              Shape="Square"
                                                              Size="Small"
                                                              Visibility="{Binding EnableUndoRedo, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                                            <ToolTipService.ToolTip>
                                                <ToolTip Content="{Binding [Kanban_Undo]}" />
                                            </ToolTipService.ToolTip>
                                            <controls:DaisyIconText IconData="{StaticResource DaisyIconArrowLeft}"
                                                                    IconSize="14" />
                                        </controls:DaisyButton>
                                        <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                              Command="{TemplateBinding RedoCommand}"
                                                              IsEnabled="{Binding CommandHistory.CanRedo, RelativeSource={RelativeSource TemplatedParent}}"
                                                              AutomationProperties.Name="{Binding [Kanban_Redo]}"
                                                              Variant="Neutral"
                                                              Shape="Square"
                                                              Size="Small"
                                                              Visibility="{Binding EnableUndoRedo, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                                            <ToolTipService.ToolTip>
                                                <ToolTip Content="{Binding [Kanban_Redo]}" />
                                            </ToolTipService.ToolTip>
                                            <controls:DaisyIconText IconData="{StaticResource DaisyIconArrowRight}"
                                                                    IconSize="14" />
                                        </controls:DaisyButton>
                                        <controls:DaisyDivider />
                                        <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                              Command="{TemplateBinding ZoomInCommand}"
                                                              AutomationProperties.Name="{Binding [Kanban_ZoomIn]}"
                                                              Variant="Neutral"
                                                              Shape="Square"
                                                              Size="Small">
                                            <ToolTipService.ToolTip>
                                                <ToolTip Content="{Binding [Kanban_ZoomIn]}" />
                                            </ToolTipService.ToolTip>
                                            <controls:DaisyIconText IconData="{StaticResource DaisyIconZoomIn}"
                                                                    IconSize="14" />
                                        </controls:DaisyButton>
                                        <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                              Command="{TemplateBinding ZoomOutCommand}"
                                                              AutomationProperties.Name="{Binding [Kanban_ZoomOut]}"
                                                              Variant="Neutral"
                                                              Shape="Square"
                                                              Size="Small">
                                            <ToolTipService.ToolTip>
                                                <ToolTip Content="{Binding [Kanban_ZoomOut]}" />
                                            </ToolTipService.ToolTip>
                                            <controls:DaisyIconText IconData="{StaticResource DaisyIconZoomOut}"
                                                                    IconSize="14" />
                                        </controls:DaisyButton>
                                    </StackPanel>
                                </StackPanel>
                                <!-- Statistics Icon with Tooltip (at bottom of sidebar) -->
                                <StackPanel Grid.Row="1"
                                            HorizontalAlignment="Center"
                                            Spacing="8"
                                            Visibility="{Binding IsBoardViewActive, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    <controls:DaisyDivider />
                                    <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                          Command="{TemplateBinding ShowKeyboardHelpCommand}"
                                                          AutomationProperties.Name="{Binding [Kanban_KeyboardHelp_Title]}"
                                                          Variant="Neutral"
                                                          Shape="Square"
                                                          Size="Small"
                                                          Visibility="{Binding Tag.IsKeyboardHelpVisible, ElementName=PART_BoardRoot, Converter={StaticResource BooleanToVisibilityConverter}}">
                                        <ToolTipService.ToolTip>
                                            <ToolTip Content="{Binding [Kanban_KeyboardHelp_Title]}" />
                                        </ToolTipService.ToolTip>
                                        <controls:DaisyIconText IconSymbol="Help"
                                                                IconSize="14" />
                                    </controls:DaisyButton>
                                    <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                          x:Name="PART_StatsButton"
                                                          Command="{TemplateBinding ShowMetricsCommand}"
                                                          Variant="Neutral"
                                                          Shape="Square"
                                                          Size="Small"
                                                          AutomationProperties.Name="{Binding DataContext[Kanban_BoardStatistics], ElementName=PART_BoardRoot}">
                                        <ToolTipService.ToolTip>
                                            <ToolTip Content="{Binding DataContext[Kanban_BoardStatistics], ElementName=PART_BoardRoot}" />
                                        </ToolTipService.ToolTip>
                                        <controls:DaisyIconText IconData="{StaticResource DaisyIconChartBar}"
                                                                IconSize="14" />
                                    </controls:DaisyButton>
                                    <!-- Status Bar Toggle -->
                                    <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                          Command="{TemplateBinding ToggleStatusBarCommand}"
                                                          AutomationProperties.Name="{Binding [Kanban_ToggleStatusBar]}"
                                                          Variant="Neutral"
                                                          Shape="Square"
                                                          Size="Small">
                                        <ToolTipService.ToolTip>
                                            <ToolTip Content="{Binding [Kanban_ToggleStatusBar]}" />
                                        </ToolTipService.ToolTip>
                                        <controls:DaisyIconText IconData="{StaticResource DaisyIconPanelBottom}"
                                                                IconSize="14" />
                                    </controls:DaisyButton>
                                </StackPanel>
                            </Grid>
                        </Border>
                        <!-- Status Bar -->
                                <Border x:Name="PART_StatusBarBorder"
                                Grid.Row="3"
                                Grid.Column="0"
                                Background="{ThemeResource DaisyBase100Brush}"
                                BorderBrush="{ThemeResource DaisyBase300Brush}"
                                BorderThickness="0,1,0,0"
                                Padding="12,8"
                                Visibility="{Binding IsBoardStatusBarVisible, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                            <StackPanel Orientation="Vertical"
                                        Spacing="8">
                                <StackPanel Orientation="Horizontal"
                                            Spacing="24">
                                    <!-- Column Count -->
                                    <StackPanel Orientation="Horizontal"
                                                Spacing="6">
                                        <controls:DaisyIconText IconData="{StaticResource DaisyIconChartBar}"
                                                                IconSize="14"
                                                                Foreground="{ThemeResource DaisyBaseContentBrush}" />
                                        <TextBlock Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                   VerticalAlignment="Center">
                                            <Run Text="{Binding Board.Columns.Count, RelativeSource={RelativeSource TemplatedParent}}"
                                                 FontWeight="SemiBold" />
                                            <Run Text=" " />
                                            <Run Text="{Binding [Kanban_Sections]}" />
                                        </TextBlock>
                                    </StackPanel>
                                    <!-- Separator -->
                                    <Border Width="1"
                                            Background="{ThemeResource DaisyBase300Brush}" />
                                    <!-- Zoom Level -->
                                    <StackPanel Orientation="Horizontal"
                                                Spacing="6">
                                        <controls:DaisyIconText IconData="{StaticResource DaisyIconZoomIn}"
                                                                IconSize="14"
                                                                Foreground="{ThemeResource DaisyBaseContentBrush}" />
                                        <TextBlock Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                   VerticalAlignment="Center">
                                            <Run Text="{Binding [Kanban_Zoom]}" />
                                            <Run Text=": " />
                                            <Run Text="{Binding BoardSizeLabel, RelativeSource={RelativeSource TemplatedParent}}"
                                                 FontWeight="SemiBold" />
                                        </TextBlock>
                                    </StackPanel>
                                    <!-- Separator -->
                                    <Border Width="1"
                                            Background="{ThemeResource DaisyBase300Brush}"
                                            Visibility="{Binding HasArchiveColumnToggle, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                    <!-- Archive Toggle -->
                                    <StackPanel Orientation="Horizontal"
                                                Spacing="6"
                                                Visibility="{Binding HasArchiveColumnToggle, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                                        <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                              Command="{TemplateBinding ToggleArchiveColumnVisibilityCommand}"
                                                              Variant="Ghost"
                                                              Size="Small"
                                                              Visibility="{Binding CanShowArchiveColumn, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                              AutomationProperties.Name="{Binding [Kanban_Archive_ToggleShow]}"
                                                              >
                                            <ToolTipService.ToolTip>
                                                <ToolTip Content="{Binding [Kanban_Archive_ToggleShow]}" />
                                            </ToolTipService.ToolTip>
                                            <controls:DaisyIconText IconData="{StaticResource DaisyIconFolder}"
                                                                    IconSize="12"
                                                                    Text="{Binding [Kanban_Archive_ToggleShow]}" />
                                        </controls:DaisyButton>
                                        <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                              Command="{TemplateBinding ToggleArchiveColumnVisibilityCommand}"
                                                              Variant="Ghost"
                                                              Size="Small"
                                                              Visibility="{Binding CanHideArchiveColumn, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                              AutomationProperties.Name="{Binding [Kanban_Archive_ToggleHide]}"
                                                              >
                                            <ToolTipService.ToolTip>
                                                <ToolTip Content="{Binding [Kanban_Archive_ToggleHide]}" />
                                            </ToolTipService.ToolTip>
                                            <controls:DaisyIconText IconData="{StaticResource DaisyIconFolder}"
                                                                    IconSize="12"
                                                                    Text="{Binding [Kanban_Archive_ToggleHide]}" />
                                        </controls:DaisyButton>
                                    </StackPanel>
                                    <!-- Separator -->
                                    <Border Width="1"
                                            Background="{ThemeResource DaisyBase300Brush}"
                                            Visibility="{Binding HasStatusMessage, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                    <!-- Status Message -->
                                    <StackPanel Orientation="Horizontal"
                                                Spacing="6"
                                                Visibility="{Binding HasStatusMessage, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource BooleanToVisibilityConverter}}">
                                        <controls:DaisyIconText IconData="{StaticResource DaisyIconWarning}"
                                                                IconSize="14"
                                                                Foreground="{ThemeResource DaisyWarningBrush}" />
                                        <TextBlock Text="{Binding StatusMessage, RelativeSource={RelativeSource TemplatedParent}}"
                                                   Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                   TextWrapping="Wrap"
                                                   VerticalAlignment="Center" />
                                    </StackPanel>
                                </StackPanel>
                                <!-- Bulk Actions -->
                                <controls:WrapPanel Orientation="Horizontal"
                                                    HorizontalSpacing="8"
                                                    VerticalSpacing="8"
                                                    Visibility="{Binding Tag.HasSelection, ElementName=PART_BoardRoot, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    <TextBlock Foreground="{ThemeResource DaisyBaseContentBrush}"
                                               VerticalAlignment="Center">
                                        <Run Text="{Binding Tag.SelectedCount, ElementName=PART_BoardRoot}"
                                             FontWeight="SemiBold" />
                                        <Run Text=" " />
                                        <Run Text="{Binding DataContext[Kanban_Selection_Selected], ElementName=PART_BoardRoot}" />
                                    </TextBlock>
                                    <Border Width="1"
                                            Background="{ThemeResource DaisyBase300Brush}" />
                                    <StackPanel Orientation="Horizontal"
                                                Spacing="6">
                                        <controls:DaisySelect Style="{StaticResource KanbanFocusSelectStyle}"
                                                              Width="180"
                                                              ItemsSource="{Binding Tag.BulkMoveColumns, ElementName=PART_BoardRoot}"
                                                              DisplayMemberPath="Title"
                                                              SelectedItem="{Binding Tag.SelectedBulkMoveColumn, ElementName=PART_BoardRoot, Mode=TwoWay}"
                                                              PlaceholderText="{Binding DataContext[Kanban_Bulk_MoveTo], ElementName=PART_BoardRoot}"
                                                              Size="Small" />
                                        <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                              Command="{Binding Tag.BulkMoveCommand, ElementName=PART_BoardRoot}"
                                                              CommandParameter="{Binding Tag.SelectedBulkMoveColumn, ElementName=PART_BoardRoot}"
                                                              Variant="Primary"
                                                              Size="Small"
                                                              AutomationProperties.Name="{Binding DataContext[Kanban_Bulk_Move], ElementName=PART_BoardRoot}">
                                            <controls:DaisyIconText IconData="{StaticResource DaisyIconArrowRight}"
                                                                    IconSize="12"
                                                                    Text="{Binding DataContext[Kanban_Bulk_Move], ElementName=PART_BoardRoot}" />
                                        </controls:DaisyButton>
                                    </StackPanel>
                                    <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                          Variant="Ghost"
                                                          Size="Small"
                                                          AutomationProperties.Name="{Binding DataContext[Kanban_Bulk_Priority], ElementName=PART_BoardRoot}">
                                        <controls:DaisyIconText IconData="{StaticResource DaisyIconStar}"
                                                                IconSize="12"
                                                                Text="{Binding DataContext[Kanban_Bulk_Priority], ElementName=PART_BoardRoot}" />
                                        <controls:DaisyButton.Flyout>
                                            <MenuFlyout>
                                                <MenuFlyoutItem Text="{Binding DataContext[Kanban_Priority_Low], ElementName=PART_BoardRoot}"
                                                                Command="{Binding Tag.BulkSetPriorityCommand, ElementName=PART_BoardRoot}"
                                                                CommandParameter="Low" />
                                                <MenuFlyoutItem Text="{Binding DataContext[Kanban_Priority_Normal], ElementName=PART_BoardRoot}"
                                                                Command="{Binding Tag.BulkSetPriorityCommand, ElementName=PART_BoardRoot}"
                                                                CommandParameter="Normal" />
                                                <MenuFlyoutItem Text="{Binding DataContext[Kanban_Priority_High], ElementName=PART_BoardRoot}"
                                                                Command="{Binding Tag.BulkSetPriorityCommand, ElementName=PART_BoardRoot}"
                                                                CommandParameter="High" />
                                                <MenuFlyoutItem Text="{Binding DataContext[Kanban_Priority_Urgent], ElementName=PART_BoardRoot}"
                                                                Command="{Binding Tag.BulkSetPriorityCommand, ElementName=PART_BoardRoot}"
                                                                CommandParameter="Urgent" />
                                            </MenuFlyout>
                                        </controls:DaisyButton.Flyout>
                                    </controls:DaisyButton>
                                    <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                          Variant="Ghost"
                                                          Size="Small"
                                                          AutomationProperties.Name="{Binding DataContext[Kanban_Bulk_Tags], ElementName=PART_BoardRoot}">
                                        <controls:DaisyIconText IconData="{StaticResource DaisyIconBookmark}"
                                                                IconSize="12"
                                                                Text="{Binding DataContext[Kanban_Bulk_Tags], ElementName=PART_BoardRoot}" />
                                        <controls:DaisyButton.Flyout>
                                            <Flyout Placement="Top">
                                                <StackPanel Spacing="8">
                                                    <TextBlock Text="{Binding DataContext[Kanban_Bulk_Tags], ElementName=PART_BoardRoot}"
                                                               Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                               TextWrapping="Wrap" />
                                                    <controls:DaisyInput x:Name="PART_BulkTagsInput"
                                                                         PlaceholderText="{Binding DataContext[Kanban_Bulk_TagsPlaceholder], ElementName=PART_BoardRoot}"
                                                                         Variant="Bordered"
                                                                         Size="Small" />
                                                    <StackPanel Orientation="Horizontal"
                                                                Spacing="8">
                                                        <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                              Content="{Binding DataContext[Common_Apply], ElementName=PART_BoardRoot}"
                                                                              Command="{Binding Tag.BulkSetTagsCommand, ElementName=PART_BoardRoot}"
                                                                              CommandParameter="{Binding Text, ElementName=PART_BulkTagsInput}"
                                                                              Variant="Primary"
                                                                              Size="Small" />
                                                        <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                              Content="{Binding DataContext[Common_Clear], ElementName=PART_BoardRoot}"
                                                                              Command="{Binding Tag.BulkSetTagsCommand, ElementName=PART_BoardRoot}"
                                                                              CommandParameter="{x:Null}"
                                                                              Variant="Ghost"
                                                                              Size="Small" />
                                                    </StackPanel>
                                                </StackPanel>
                                            </Flyout>
                                        </controls:DaisyButton.Flyout>
                                    </controls:DaisyButton>
                                    <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                          Variant="Ghost"
                                                          Size="Small"
                                                          AutomationProperties.Name="{Binding DataContext[Kanban_Bulk_DueDate], ElementName=PART_BoardRoot}">
                                        <controls:DaisyIconText IconData="{StaticResource DaisyIconDateDisplay}"
                                                                IconSize="12"
                                                                Text="{Binding DataContext[Kanban_Bulk_DueDate], ElementName=PART_BoardRoot}" />
                                        <controls:DaisyButton.Flyout>
                                            <Flyout Placement="Top">
                                                <StackPanel Spacing="8">
                                                    <TextBlock Text="{Binding DataContext[Kanban_Bulk_DueDate], ElementName=PART_BoardRoot}"
                                                               Foreground="{ThemeResource DaisyBaseContentBrush}"
                                                               TextWrapping="Wrap" />
                                                    <DatePicker x:Name="PART_BulkDueDatePicker"
                                                                HorizontalAlignment="Stretch" />
                                                    <StackPanel Orientation="Horizontal"
                                                                Spacing="8">
                                                        <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                              Content="{Binding DataContext[Common_Apply], ElementName=PART_BoardRoot}"
                                                                              Command="{Binding Tag.BulkSetDueDateCommand, ElementName=PART_BoardRoot}"
                                                                              CommandParameter="{Binding Date, ElementName=PART_BulkDueDatePicker}"
                                                                              Variant="Primary"
                                                                              Size="Small" />
                                                        <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                                              Content="{Binding DataContext[Common_Clear], ElementName=PART_BoardRoot}"
                                                                              Command="{Binding Tag.BulkSetDueDateCommand, ElementName=PART_BoardRoot}"
                                                                              CommandParameter="{x:Null}"
                                                                              Variant="Ghost"
                                                                              Size="Small" />
                                                    </StackPanel>
                                                </StackPanel>
                                            </Flyout>
                                        </controls:DaisyButton.Flyout>
                                    </controls:DaisyButton>
                                    <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                          Command="{Binding Tag.BulkArchiveCommand, ElementName=PART_BoardRoot}"
                                                          Variant="Ghost"
                                                          Size="Small"
                                                          Visibility="{Binding Tag.CanHideArchiveColumn, ElementName=PART_BoardRoot, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                          AutomationProperties.Name="{Binding DataContext[Kanban_Bulk_Archive], ElementName=PART_BoardRoot}">
                                        <controls:DaisyIconText IconData="{StaticResource DaisyIconFolder}"
                                                                IconSize="12"
                                                                Text="{Binding DataContext[Kanban_Bulk_Archive], ElementName=PART_BoardRoot}" />
                                    </controls:DaisyButton>
                                    <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                          Command="{Binding Tag.BulkDeleteCommand, ElementName=PART_BoardRoot}"
                                                          Variant="Ghost"
                                                          Size="Small"
                                                          AutomationProperties.Name="{Binding DataContext[Kanban_Bulk_Delete], ElementName=PART_BoardRoot}">
                                        <controls:DaisyIconText IconData="{StaticResource DaisyIconDelete}"
                                                                IconSize="12"
                                                                Text="{Binding DataContext[Kanban_Bulk_Delete], ElementName=PART_BoardRoot}" />
                                    </controls:DaisyButton>
                                    <controls:DaisyButton Style="{StaticResource KanbanFocusButtonStyle}"
                                                          Command="{Binding Tag.ClearSelectionCommand, ElementName=PART_BoardRoot}"
                                                          Variant="Ghost"
                                                          Size="Small"
                                                          AutomationProperties.Name="{Binding DataContext[Kanban_Bulk_ClearSelection], ElementName=PART_BoardRoot}">
                                        <controls:DaisyIconText IconData="{StaticResource DaisyIconClose}"
                                                                IconSize="12"
                                                                Text="{Binding DataContext[Kanban_Bulk_ClearSelection], ElementName=PART_BoardRoot}" />
                                    </controls:DaisyButton>
                                </controls:WrapPanel>
                            </StackPanel>
                        </Border>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>
